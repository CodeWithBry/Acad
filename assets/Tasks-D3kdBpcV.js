import{r as a,j as e,B as d,c as xe,d as re,a as ce,u as pe,b as Oe,g as Fe,e as we}from"./index-CimYRKbA.js";const Ie="_bottomOptionsWrapper_1hzx8_1",Ee="_left_1hzx8_36",He="_uncheck_1hzx8_36",De="_right_1hzx8_45",Ae="_fullContent_1hzx8_72",A={bottomOptionsWrapper:Ie,left:Ee,uncheck:He,right:De,fullContent:Ae},Je=()=>{const{handleSelectedTasks:l,selectedTasks:f,unselectAll:n,tasks:h,searching:u,setTasks:c,filteredTasks:i,setFilteredTasks:_,handleMarking:m,selecting:s,setSelecting:t,tasksOnType:r,setTasksOnType:p}=a.useContext(q),j=()=>{let W=r,v=i,D=[],O=[];if(u){v=v.map(C=>({...C,isChecked:!0}));for(let C=0;C<v.length;C++)v[C].isChecked&&O.push({id:v[C].id,index:C});l([...O])}else{W=W.map(C=>({...C,isChecked:!0}));for(let C=0;C<W.length;C++)W[C].isChecked&&D.push({id:W[C].id,index:C});l([...D])}u?_([...v]):p(C=>C.map(E=>({...E,isChecked:!0})))};function x(){let W=h,v=i;for(let D in v)for(let O in f)v[D].id===f[O].id&&v.splice(D,1);for(let D in h)for(let O in f)W[D].id===f[O].id&&W.splice(D,1);m(v,[...W]),l(null)}const N=()=>{if(s==!0)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:A.left,children:[e.jsx(d,{element:e.jsx("span",{className:A.fullContent,children:"Select All"}),icon:e.jsx("i",{className:"fa fa-check"}),className:A.SelectAllButton,func:()=>{j()}}),e.jsx(d,{element:e.jsx("span",{className:A.fullContent,children:"Unselect"}),icon:e.jsx("i",{className:`fas fa fa-check ${A.uncheck}`}),className:A.UnselectAllButton,func:()=>{n()}})]}),e.jsxs("div",{className:A.right,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-trash"}),element:e.jsx("span",{className:A.fullContent,children:"Delete"}),func:()=>{f?x():console.log("No update")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),element:e.jsx("span",{className:A.fullContent,children:"Cancel"}),func:()=>{t(!1),n()}})]})]})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:A.bottomOptionsWrapper,children:s?e.jsx(N,{}):e.jsx(d,{element:e.jsx("span",{className:A.fullContent,children:"Select"}),icon:e.jsx("i",{className:"fa fa-hand-o-up"}),className:A.SelectButton,func:()=>t(!0)})})})},qe="_editTaskPrompt_p46cq_1",Ue="_hideEditTaskPrompt_p46cq_10",Le="_nav_p46cq_29",Me="_content_p46cq_64",Re="_submitButton_p46cq_87",ee={editTaskPrompt:qe,hideEditTaskPrompt:Ue,nav:Le,content:Me,submitButton:Re},ze=()=>{const{openedTask:l,setOpenedTask:f,tasks:n,filteredTasks:h,setEditing:u,editing:c,handleMarking:i}=a.useContext(q),_=a.useRef(null);function m(){let s=[...n],t=h;for(let r in s)s[r].id===l.id&&(s[r].task=_.current.innerText);for(let r in t)t[r].id===l.id&&(t[r].task=_.current.innerText);i(t,[...s])}if((l==null?void 0:l.id)!=null)return e.jsxs("div",{className:c?ee.editTaskPrompt:ee.hideEditTaskPrompt,children:[e.jsxs("div",{className:ee.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Edit Task"})]}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{f({index:null,isOpened:!1}),u(!1)}})]}),e.jsx("div",{className:ee.content,children:e.jsx("p",{ref:_,contentEditable:c,children:n.map((s,t)=>{if(s.id===l.id)return s.task})})}),e.jsx(d,{content:"Save Changes",className:ee.submitButton,func:()=>{m(),u(!1)}})]})},Ge="_sortTypeBar_vxque_1",Ve="_hideSortTypeBar_vxque_1",Ye="_sortTypeBarBox_vxque_14",Ze="_notIndicated_vxque_32",Ke="_indicated_vxque_37",se={sortTypeBar:Ge,hideSortTypeBar:Ve,sortTypeBarBox:Ye,notIndicated:Ze,indicated:Ke},Qe=()=>{const{sortingTypeBar:l,setSortingTypeBar:f,sortingTypes:n,setSortingTypes:h,unselectAll:u,setType:c,type:i,setTasksOnType:_,tasks:m}=a.useContext(q);return a.useEffect(()=>{h(t=>t.map(r=>i==r.type?{...r,ind:!0}:{...r,ind:!1})),console.log(i);let s=[];if(i=="Pending"||i=="Finished"){for(let t in m)m[t].type.toLowerCase()==i.toLowerCase()&&s.push(m[t]);_([...s])}else _([...m])},[i,m]),e.jsx(e.Fragment,{children:e.jsx("div",{className:l?se.sortTypeBar:se.hideSortTypeBar,onClick:()=>{f(!1)},children:e.jsx("ul",{className:se.sortTypeBarBox,children:n==null?void 0:n.map((s,t)=>e.jsx("li",{className:s.ind?se.indicated:se.notIndicated,onClick:()=>{u(),c(s.type),h(r=>r.map(p=>r[t].type==p.type?{...p,ind:!0}:{...p,ind:!1}))},children:s.type},s.type))})})})},Xe="_sortTaskPrompt_1n0vh_9",es="_hideSortTaskPrompt_1n0vh_10",ss="_sortBox_1n0vh_26",ts="_Hide_Sort_Box_Button_1n0vh_38",ns="_sortOptions_1n0vh_53",as="_checked_1n0vh_76",os="_unchecked_1n0vh_76",G={sortTaskPrompt:Xe,hideSortTaskPrompt:es,sortBox:ss,Hide_Sort_Box_Button:ts,sortOptions:ns,checked:as,unchecked:os},ls=()=>{const{setSortTaskPrompt:l,sortTaskPrompt:f,sortingTypes:n,setSortingTypes:h,setSorting:u,sortOptions:c,setSortOptions:i}=a.useContext(q);function _(m){let s=c;s=s.map((t,r)=>s[r]===s[m]?{...t,state:!t.state}:{...t,state:!1});for(let t in s){if(s[t].state==!0){u(!0);break}t==s.length-1&&!s[t].state&&u(!1)}console.log(s),i([...s])}return e.jsx("div",{className:f?G.sortTaskPrompt:G.hideSortTaskPrompt,children:e.jsxs("div",{className:f?G.sortBox:G.Hide_Sort_Box,children:[e.jsx("h2",{children:"Sort Settings"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:G.Hide_Sort_Box_Button,func:()=>{l(!1)}}),e.jsx("div",{className:G.sortOptions,children:c==null?void 0:c.map((m,s)=>e.jsx(d,{icon:e.jsx("i",{className:`fa fa-check-square ${m.state==!0?G.checked:G.unchecked}`}),content:m.description,func:()=>{_(s)}},m.description))})]})})},rs="_tasksContainer_1gk8c_1",cs="_tasks_1gk8c_1",is="_Finished_1gk8c_37",ds="_unchecked_1gk8c_58",fs="_checked_1gk8c_62",ps="_col_1gk8c_66",hs="_br_1gk8c_70",us="_fs_1gk8c_74",ms="_bgC_1gk8c_78",_s="_fW_1gk8c_82",b={tasksContainer:rs,tasks:cs,Finished:is,unchecked:ds,checked:fs,col:ps,br:hs,fs:us,bgC:ms,fW:_s},J=({task:l,i:f})=>{const{selecting:n,searching:h,tasks:u,setTasks:c,setFilteredTasks:i,handleSelectedTasks:_}=a.useContext(he),{setOpenedTask:m,setEditing:s}=a.useContext(q);function t(r){let p=[],j=u;j=j.map(x=>x.id===r?{...x,isChecked:!x.isChecked}:{...x});for(let x=0;x<j.length;x++)j[x].isChecked&&p.push({id:j[x].id,index:x}),x==j.length-1&&(_(p),console.log(p));c(x=>x.map(N=>N.id===r?{...N,isChecked:!N.isChecked}:{...N})),h&&i(x=>x.map(N=>N.id===r?{...N,isChecked:!N.isChecked}:{...N}))}return e.jsxs("label",{htmlFor:"task"+l.id,style:l.style!="default"?{...l.style}:null,className:l.type=="pending"?`${b.Pending} ${l.cName.map(r=>JSON.parse(r)).join(" ")} ${b.tasks}`:`${b.Finished} ${l.cName.map(r=>JSON.parse(r)).join(" ")} ${b.tasks}`,onDoubleClick:()=>{s(!0),m({id:l.id,isOpened:!0})},children:[e.jsx("i",{style:n==!1?{display:"none"}:{display:"block"},className:`fa fa-check-square ${l.isChecked===!0?b.checked:b.unchecked}`}),e.jsx("input",{style:{display:"none"},type:"checkbox",id:"task"+l.id,onChange:()=>{n&&t(l.id)}}),e.jsx("span",{children:l.task})]},l.id)},gs="_componentLoaderWrapper_10f0f_1",xs="_component_10f0f_1",ks="_component1_10f0f_61",js="_component2_10f0f_71",Cs="_component3_10f0f_79",Ts="_component4_10f0f_87",Ns="_component5_10f0f_95",U={componentLoaderWrapper:gs,component:xs,component1:ks,component2:js,component3:Cs,component4:Ts,component5:Ns},Ps=()=>e.jsxs("div",{className:U.componentLoaderWrapper,children:[e.jsx("li",{className:`${U.component1} ${U.component}`}),e.jsx("li",{className:`${U.component2} ${U.component}`}),e.jsx("li",{className:`${U.component3} ${U.component}`}),e.jsx("li",{className:`${U.component4} ${U.component}`}),e.jsx("li",{className:`${U.component5} ${U.component}`})]}),Ss=()=>{const{sortOptions:l,tasksOnType:f,searching:n,filteredTasks:h}=a.useContext(q),{sorting:u,type:c,selecting:i}=a.useContext(he),[_,m]=a.useState([]);if(a.useEffect(()=>{let s=n?h:f;for(let t in l)t==0&&l[t].state==!0?s=s.sort((r,p)=>p.dateCreated.time-r.dateCreated.time):t==1&&l[t].state==!0?s=s.sort((r,p)=>r.dateCreated.time-p.dateCreated.time):t==2&&l[t].state==!0?s=s.sort((r,p)=>r.task.localeCompare(p.task)):t==3&&l[t].state==!0&&(s=s.sort((r,p)=>p.task.localeCompare(r.task)));m([...s])},[l,f,h]),(f==null?void 0:f.length)==0)return e.jsx(Ps,{});if(n&&u)return e.jsx("div",{className:b.tasksContainer,children:_.map((s,t)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(n&&!u)return e.jsx("div",{className:b.tasksContainer,children:h.map((s,t)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(u&&!n)return e.jsx("div",{className:b.tasksContainer,children:_.map((s,t)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id)})});if(!u&&!n)return e.jsx("div",{className:b.tasksContainer,children:f==null?void 0:f.map((s,t)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(J,{task:s,i:t,selecting:i,chechTask:()=>checkTask()},s.id)})})},he=a.createContext(),ys=()=>{const{searching:l,setSearching:f,tasks:n,setTasks:h,filteredTasks:u,setFilteredTasks:c,sorting:i,setSorting:_,type:m,selecting:s,setSelecting:t,handleSelectedTasks:r}=a.useContext(q),[p,j]=a.useState(n.length!=0?[...n]:[]),x={searching:l,setSearching:f,tasks:n,setTasks:h,filteredTasks:u,setFilteredTasks:c,sorting:i,setSorting:_,type:m,selecting:s,setSelecting:t,taskCheckboxes:p,setTaskCheckboxes:j,handleSelectedTasks:r};return a.useEffect(()=>{j([...n])},[n]),e.jsx(he.Provider,{value:x,children:e.jsx(Ss,{})})},Bs="_Prompt_Box_g65aa_1",vs="_Close_Button_g65aa_22",bs="_colorPicker_g65aa_63",$s="_Hide_BG_Color_Prompt_g65aa_79",Ws="_Hide_Color_Prompt_g65aa_80",Os="_Hide_Border_Color_Prompt_g65aa_81",Fs="_Hide_Font_Weight_Prompt_g65aa_82",ws="_Hide_Italic_Prompt_g65aa_83",Is="_BG_Color_Prompt_g65aa_87",Es="_Color_Prompt_g65aa_88",Hs="_Border_Color_Prompt_g65aa_89",Ds="_Font_Weight_Prompt_g65aa_90",As="_Italic_Prompt_g65aa_91",Js="_topOptionsWrapper_g65aa_95",qs="_topOptionsBox_g65aa_105",Us="_notWorking_g65aa_174",o={Prompt_Box:Bs,Close_Button:vs,colorPicker:bs,Hide_BG_Color_Prompt:$s,Hide_Color_Prompt:Ws,Hide_Border_Color_Prompt:Os,Hide_Font_Weight_Prompt:Fs,Hide_Italic_Prompt:ws,BG_Color_Prompt:Is,Color_Prompt:Es,Border_Color_Prompt:Hs,Font_Weight_Prompt:Ds,Italic_Prompt:As,topOptionsWrapper:Js,topOptionsBox:qs,notWorking:Us},Ls=()=>{var oe;const{tasks:l,setTasks:f,selectedTasks:n,numberOfChanges:h,setNumberOfChanges:u,handleMarking:c,filteredTasks:i,searching:_,saveToDataBase:m,setType:s,setWriteTaskPrompt:t,setSortTaskPrompt:r}=a.useContext(q),[p,j]=a.useState(!1),[x,N]=a.useState(!1),[W,v]=a.useState(!1),[D,O]=a.useState(!1),[C,E]=a.useState(!1);function $(P,w,Y,Z,K,L){if(n.length>=1){let H=[],I=l,S=i,M=[];P=="finished"?s("Finished"):P=="pending"&&s("Pending");for(let R in n)if(_)for(let k in S)S[k].id==n[R].id?(S[k].lastUpdate={fullDate:new Date,time:Date.now()},P!=!1?console.log(S[n[R].index]):((S[k].style=="default"||S[k].style==null)&&(S[k].style={color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}),w&&(S[k].style.color=w,M.push(S[k])),Y&&(S[k].style.backgroundColor=Y,M.push(S[k])),Z&&(S[k].style.fontWeight=Z,M.push(S[k])),K&&(S[k].style.fontStyle=K,M.push(S[k])),L&&(S[k].style.borderColor=L,M.push(S[k])))):M.push(S[n[R].index]);for(let R in n)I=I.map(k=>{if(n[R].id==k.id){let y={...k};return y.style=y.style==="default"?{color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}:{...y.style},y.isChecked&&(H.push(y),y.lastUpdate={fullDate:new Date,time:Date.now()}),P!==!1&&(y.type=P),w&&(y.style={...y.style,color:w}),Y&&(y.style={...y.style,backgroundColor:Y}),Z&&(y.style={...y.style,fontWeight:Z}),K&&(y.style={...y.style,fontStyle:K}),L&&(y.style={...y.style,borderColor:L}),y.isChecked=!0,y}else return{...k}});_?c([...S],[...I],[...H]):c(S,[...I],[...H])}}function ie(){let P=h+1,w=JSON.parse(localStorage.getItem("Changes"));w=w[P],f([...w]),u(P)}function V(){let P=h-1,w=JSON.parse(localStorage.getItem("Changes"));w=w[P],f([...w]),u(P)}const de=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p?`${o.BG_Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_BG_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{j(!1)}}),e.jsx("h1",{children:"Change BG Color"}),e.jsxs("label",{htmlFor:"colorPicker",className:o.colorPicker,children:[e.jsx("input",{type:"color",id:"colorPicker",onBlur:P=>{$(!1,!1,P.target.value,!1,!1)}}),e.jsx("span",{children:"Choose BG Color"})]}),e.jsx(d,{content:"Default",func:()=>{$(!1,!1,"#f09c2e",!1,!1)}})]}),e.jsxs("div",{className:x?`${o.Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Color"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{N(!1)}}),e.jsxs("label",{htmlFor:"bgColorPicker",className:`${o.bgColorPicker} ${o.colorPicker}`,children:[e.jsx("input",{type:"color",id:"bgColorPicker",onBlur:P=>{$(!1,P.target.value,!1,!1,!1)}}),e.jsx("span",{children:"Choose Font Color"})]}),e.jsx(d,{content:"Default",func:()=>{$(!1,"white",!1,!1,!1)}})]}),e.jsxs("div",{className:W?`${o.Border_Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_Border_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Border Color"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{v(!1)}}),e.jsxs("label",{htmlFor:"borderColorPicker",className:`${o.borderColorPicker} ${o.colorPicker}`,children:[e.jsx("input",{type:"color",id:"borderColorPicker",onBlur:P=>{$(!1,!1,!1,!1,!1,P.target.value)}}),e.jsx("span",{children:"Choose Border Color"})]}),e.jsx(d,{content:"Default",func:()=>{$(!1,!1,!1,!1,!1,"#d16c06")}})]}),e.jsxs("div",{className:D?`${o.Font_Weight_Prompt} ${o.Prompt_Box}`:`${o.Hide_Font_Weight_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Weight"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{O(!1)}}),e.jsx(d,{content:"Normal",func:()=>{$(!1,!1,!1,"Normal",!1,!1)}}),e.jsx(d,{content:"Bold",func:()=>{$(!1,!1,!1,"Bold",!1,!1)}}),e.jsx(d,{content:"Bolder",func:()=>{$(!1,!1,!1,"Bolder",!1,!1)}})]}),e.jsxs("div",{className:C?`${o.Italic_Prompt} ${o.Prompt_Box}`:`${o.Hide_Italic_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Italization"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{E(!1)}}),e.jsx(d,{content:"Normal",func:()=>{$(!1,!1,!1,!1,"Normal",!1)}}),e.jsx(d,{content:"Italic",func:()=>{$(!1,!1,!1,!1,"Italic",!1)}})]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:o.topOptionsWrapper,children:[e.jsx(de,{}),e.jsxs("div",{className:o.topOptionsBox,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-save"}),content:"Save Changes",className:h==null?`${o.notWorking}`:null,func:()=>{h!=null&&m()}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"undo"}),content:"Undo",className:h==null||h==0?`${o.notWorking}`:null,func:()=>{h>0&&V()}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"redo"}),content:"Redo",className:h<((oe=JSON.parse(localStorage.getItem("Changes")))==null?void 0:oe.length)-1&&h!=null?null:`${o.notWorking}`,func:()=>{var P;h<((P=JSON.parse(localStorage.getItem("Changes")))==null?void 0:P.length)-1&&h!=null&&ie()}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-plus"}),content:e.jsx("span",{children:" Create New Task"}),func:()=>{t(!0)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Finished"}),className:n.length!=0?o.working:o.notWorking,func:()=>{$("finished","white","#51af0f",!1,!1,"rgb(8, 97, 20)")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Pending"}),className:n.length!=0?o.working:o.notWorking,func:()=>{$("pending","white","#f09c2e",!1,!1,"rgb(209, 108, 6)")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-sort"}),content:e.jsx("span",{children:" Sort"}),func:()=>{r(!0)}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"format_color_fill"}),content:e.jsx("span",{children:" BG Color "}),className:n.length!=0?o.working:o.notWorking,func:()=>{j(!0),N(!1),v(!1),O(!1),E(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"format_color_text"}),content:e.jsx("span",{children:" Font Color"}),className:n.length!=0?o.working:o.notWorking,func:()=>{N(!0),j(!1),v(!1),O(!1,E(!1))}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"border_color"}),content:e.jsx("span",{children:" Border Color"}),className:n.length!=0?o.working:o.notWorking,func:()=>{v(!0),j(!1),N(!1),O(!1),E(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-bold"}),content:" Bold",className:n.length!=0?o.working:o.notWorking,func:()=>{v(!1),j(!1),N(!1),O(!0),E(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-italic"}),content:" Italic",className:n.length!=0?o.working:o.notWorking,func:()=>{v(!1),j(!1),N(!1),O(!1),E(!0)}})]})]})})},Ms="_writeTaskPrompt_1sqzc_1",Rs="_hideWriteTaskPrompt_1sqzc_1",zs="_nav_1sqzc_23",Gs="_content_1sqzc_58",Vs="_submitButton_1sqzc_81",te={writeTaskPrompt:Ms,hideWriteTaskPrompt:Rs,nav:zs,content:Gs,submitButton:Vs},Ys=({setWriteTaskPrompt:l})=>{const{writeTaskPrompt:f,writeTask:n,setShowNavbar:h}=a.useContext(q),u=a.useRef(null),c=a.useRef(null),[i,_]=a.useState(!1);function m(){_(Math.random()*1)}function s(){n(c.current.innerText)}function t(){c.current.innerHTML="<br>",r()}function r(){c.current.innerText==`
`||c.current.innerHTML=="<br>"?u.current.style.display="block":u.current.style.display="none"}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:f?te.writeTaskPrompt:te.hideWriteTaskPrompt,children:[e.jsxs("div",{className:te.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Task Prompt"})]}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{l(!1),t()}})]}),e.jsxs("div",{className:te.content,children:[e.jsx("span",{ref:u,children:"Type Any Task..."}),e.jsx("p",{ref:c,contentEditable:"true",onInput:()=>{m(),r()}})]}),e.jsx(d,{content:"Submit",className:te.submitButton,func:()=>{s(),t(),l(!1)}})]})})},Zs="_Changes_Wrapper_hvebf_1",Ks="_Changes_Box_hvebf_15",Qs="_closeButton_hvebf_29",Xs="_Top_hvebf_45",et="_Options_hvebf_71",ne={Changes_Wrapper:Zs,Changes_Box:Ks,closeButton:Qs,Top:Xs,Options:et},st=()=>{const{saveChanges:l,setSaveChanges:f,user:n,setHideSideBar:h,setLoading:u,setChanges:c,setTasksCache:i}=a.useContext(xe),{setNumberOfChanges:_,numberOfChanges:m,backUpNavigation:s}=a.useContext(q),{setTasks:t}=a.useContext(q),r=async()=>{var j;let p=JSON.parse(localStorage.getItem("Changes"));if(p){console.log(m),p=[...p[m]],p=p.map(W=>({...W,isChecked:!1}));const x=(j=n==null?void 0:n.uid)==null?void 0:j.toString(),N=re(ce,`Users/${x}`);u(!0);try{await pe(N,{tasks:p}),_(null),t([...p]),c(null),localStorage.removeItem("Changes"),i([...p]),s()}catch(W){f(!1),console.log("Error writing task:",W)}u(!1),h(!0)}};if(l)return e.jsx("div",{className:ne.Changes_Wrapper,children:e.jsxs("div",{className:ne.Changes_Box,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:ne.closeButton,func:()=>{f(!1)}}),e.jsxs("div",{className:ne.Top,children:[e.jsx("i",{className:"fa fa-warning"}),e.jsx("h3",{children:"Would You Save Your Previous Changes?"})]}),e.jsxs("div",{className:ne.Options,children:[e.jsx(d,{content:"No",func:()=>{f(!1),localStorage.removeItem("Changes"),window.location.reload()}}),e.jsx(d,{content:"Yes",func:()=>{f(!1),r()}})]})]})})},tt="_tasksWrapper_179rq_7",nt="_tasksEditor_179rq_17",at="_searchWrapper_179rq_52",ae={tasksWrapper:tt,tasksEditor:nt,searchWrapper:at},q=a.createContext(),lt=()=>{const l=JSON.parse(localStorage.getItem("Changes")),f=Oe(),{user:n,setShowMakeUserSignIn:h,setPages:u,setLoading:c,changes:i,setChanges:_,setTasksCache:m,tasksCache:s,prevPage:t,pagination:r}=a.useContext(xe),p=a.useRef(),[j,x]=a.useState(!1),[N,W]=a.useState(!1),[v,D]=a.useState(!1),[O,C]=a.useState(!1),[E,$]=a.useState(!1),[ie,V]=a.useState(!1),[de,oe]=a.useState(!1),[P,w]=a.useState(!1),[Y,Z]=a.useState("Pending"),[K,L]=a.useState(l?l.length-1:null),[H,I]=a.useState([]),[S,M]=a.useState(H.length!=0?[...H]:[]),[R,k]=a.useState([]),[y,ue]=a.useState([]),[ke,je]=a.useState({}),[Ce,Te]=a.useState([{type:"Pending",ind:!0},{type:"Finished",ind:!1},{type:"All Tasks",ind:!1}]),[X,Ne]=a.useState([{description:"Newest to Oldest",state:!1},{description:"Oldest to Newest",state:!1},{description:"From A-Z",state:!1},{description:"From Z-A",state:!1}]),Pe=async B=>{var ge;let g=[...H];const T=(ge=n.uid)==null?void 0:ge.toString(),F=re(ce,"Users",T);let z="qwertyuiopasdfghjklzxcvbnm",Q="";for(let le=0;le<10;le++){let We=Math.floor(Math.random()*z.length);Q=Q.concat(z[We])}let _e={id:Q,task:B,dateCreated:{fullDate:new Date,time:Date.now()},selected:!1,style:"default",cName:[JSON.stringify(b.col),JSON.stringify(b.br),JSON.stringify(b.fs),JSON.stringify(b.bgC),JSON.stringify(b.fW)],isChecked:!1,type:"pending"};g.unshift(_e);try{await pe(F,{tasks:we(_e)}),x(!1),I([...g])}catch(le){console.log("Error writing task:",le)}},me=()=>{let B=H,g=R;E?(g=g.map(T=>({...T,isChecked:!1})),fe(null)):(B=B.map(T=>({...T,isChecked:!1})),fe(null)),I(T=>T.map(F=>({...F,isChecked:!1}))),E&&k([...g])};function fe(B){ue(B==null?[]:[...B])}function Se(B,g){const T=JSON.parse(localStorage.getItem("Changes"))!=null?JSON.parse(localStorage.getItem("Changes")):[];T.length==0&&T.push(H),T.length>=1&&T.push(g),localStorage.setItem("Changes",JSON.stringify(T)),_([...T]),L(T.length-1);let F=[],z=[];for(let Q in g)g[Q].isChecked?F.push(g[Q]):z.push(g[Q]);y.length>=1&&(E&&k([...B]),I([...F,...z]),m([...F,...z]))}function ye(){p.current.value==""?($(!1),k(null)):($(!0),k(H.filter(B=>B.task.toLowerCase().includes(p.current.value.toLowerCase()))),V(!1))}function Be(){let B=X;for(let g=0;g<X.length;g++)if(B[g].state==!0){V(!0);break}else g==X.length-1&&X[g].state==!1&&V(!1)}function ve(){switch(f(t),t){case"/AcadComponent/":r(0);break;case"/AcadComponent/Tasks":r(1);break;case"/AcadComponent/Folders":r(2);break;case"/AcadComponent/Contacts":r(3);break}}async function be(){const B=n==null?void 0:n.uid.toString(),g=re(ce,`Users/${B}`);c(!0);let T=JSON.parse(localStorage.getItem("Changes"));T=[...T[K]],T=T.map(F=>({...F,isChecked:!1}));try{await pe(g,{tasks:T}),L(null),I([...T]),me(),localStorage.removeItem("Changes"),_(null)}catch{alert("Failed to Save Changes. Please Try Again.")}c(!1)}a.useEffect(()=>{i!=null?I([i[i.length-1]]):n!=null&&n.uid&&(s==null?void 0:s.length)==0?(h(!1),(async()=>{try{const g=re(ce,"Users",n==null?void 0:n.uid);let F=(await Fe(g)).data().tasks;console.log(F);for(let z in F)F[z].cName=[JSON.stringify(b.col),JSON.stringify(b.br),JSON.stringify(b.fs),JSON.stringify(b.bgC),JSON.stringify(b.fW)];I([...F]),m([...F])}catch(g){console.log(g)}})()):(n==null?void 0:n.uid)==null&&s==null||(s==null?void 0:s.length)>=1?I(s):h(!0)},[n]),a.useEffect(()=>{p.current.value==""?($(!1),k(null)):($(!0),k(H.filter(B=>B.task.toLowerCase().includes(p.current.value.toLowerCase()))),V(!1))},[H]),a.useEffect(()=>{u(B=>B.map(g=>g.name==="Tasks"?{...g,ind:!0}:{...g,ind:!1}))},[]);const $e={writeTaskPrompt:j,setWriteTaskPrompt:x,editTaskPrompt:N,setEditTaskPrompt:W,sortTaskPrompt:v,setSortTaskPrompt:D,sortingTypeBar:O,setSortingTypeBar:C,type:Y,setType:Z,searching:E,setSearching:$,sorting:ie,setSorting:V,selecting:de,setSelecting:oe,editing:P,setEditing:w,numberOfChanges:K,setNumberOfChanges:L,tasks:H,setTasks:I,filteredTasks:R,setFilteredTasks:k,tasksOnType:S,setTasksOnType:M,selectedTasks:y,setSelectedTasks:ue,changes:i,setChanges:_,sortingTypes:Ce,setSortingTypes:Te,type:Y,setType:Z,sortOptions:X,setSortOptions:Ne,openedTask:ke,setOpenedTask:je,unselectAll:me,handleSelectedTasks:fe,handleMarking:Se,saveToDataBase:be,backUpNavigation:()=>{ve()},writeTask:B=>Pe(B)};return e.jsx(e.Fragment,{children:e.jsx(q.Provider,{value:$e,children:e.jsx("div",{className:ae.tasksWrapper,children:e.jsxs("div",{className:ae.tasksEditor,children:[e.jsxs("h2",{className:ae.titleWrapper,children:["Tasks",e.jsx("i",{className:"fa fa-bars",onClick:()=>{C(!O)}}),e.jsx(Qe,{})]}),e.jsx(Ls,{}),e.jsx("div",{className:ae.searchWrapper,children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"searchBar",children:e.jsx("i",{className:"fa fa-search"})}),e.jsx("input",{id:"search-bar",type:"text",ref:p,placeholder:"Type Task...",onChange:()=>{ye(),Be()}}),e.jsx(d,{content:"Search",className:ae.Search_button})]})}),e.jsx(Je,{}),e.jsx(ys,{}),e.jsx(Ys,{setWriteTaskPrompt:x}),e.jsx(ze,{}),e.jsx(st,{}),e.jsx(ls,{})]})})})})};export{lt as default,q as tasksContext};
