import{r as i,c as y,b as E,j as e,L as C,B as A,p as R,h as o,G as W,q as v,d as B,a as L,F as U,t as D,v as H,w as q,x as M,y as O}from"./index-Ck4Otn4t.js";const V="_signInWrapper_1k4ms_10",X="_Link_1k4ms_27",$="_goToStartingPage_1k4ms_32",z="_topArc_1k4ms_44",J="_form_1k4ms_57",K="_userNameCon_1k4ms_64",Q="_passwordCon_1k4ms_65",Y="_moreActions_1k4ms_72",Z="_signInButton_1k4ms_128",ss="_otherPlatformsWrapper_1k4ms_144",es="_iconsWrapper_1k4ms_155",ns="_wrapper_1k4ms_161",n={signInWrapper:V,Link:X,goToStartingPage:$,topArc:z,form:J,userNameCon:K,passwordCon:Q,moreActions:Y,signInButton:Z,otherPlatformsWrapper:ss,iconsWrapper:es,wrapper:ns};function os(){const{setUser:l,setLoading:r,setContinueAs:u,pagination:d,prevPage:c}=i.useContext(y),p=E(),[w,j]=i.useState(!1),[ts,as]=i.useState(),m=i.useRef(null),g=i.useRef(null),h=i.useRef(null),f=i.useRef(null),k=()=>{const s=h==null?void 0:h.current.value,t=f==null?void 0:f.current.value,a=m.current,x=g.current;return{email:s,pass:t,warning1:a,warning2:x}},N=()=>{const s=k();s.email&&(s.email=""),s.pass&&(s.pass=""),s.warning1.innerText="",s.warning2.innerText=""},I=s=>{const t=k();return(s==null?void 0:s.target.value)==""||t.email==""?m.current.textContent="The input field is blank!":m.current.textContent="",!1},P=s=>{const t=k();return(s==null?void 0:s.target.value)==""||t.pass==""?g.current.textContent="The input field is blank!":g.current.textContent="",!1},b=async()=>{I(),P();{r(!0);try{await R(o,h.current.value,f.current.value),N(),l(o.currentUser),u(!0),p(c),d(0)}catch(s){console.log(s),s.code=="auth/invalid-email"&&(m.current.textContent="Invalid email/Email doesn't exist."),s.code=="auth/invalid-credential"&&(g.current.textContent="Password does not match."),s.code=="auth/network-request-failed"&&alert("Network Error, unable to sign in. Please try again.")}r(!1)}},S=async()=>{const s=new W;r(!0),v(o,s).then(t=>{var a;N(),l(t.user),B(L,"Users",(a=o.currentUser)==null?void 0:a.uid),u(!0),p(c),d(0)}).catch(t=>{console.log(t),r(!1)}),r(!1)},T=async()=>{r(!0),v(o,M).then(s=>{U.credentialFromResult(s);const t=s.user;l(t),u(!0),p(c),d(0)}).catch(s=>{console.log(s),r(!1)}),r(!1)},F=async()=>{v(o,O).then(s=>{const a=D.credentialFromResult(s).accessToken;console.log(a);const x=s.user;l(x),u(!0),p(c),d(0)}).catch(async s=>{if(s.code==="auth/account-exists-with-different-credential"){const t=s.credential;s.customData.email;const a=await H(o,"bryanagustinpajarillaga@gmail.com");if(console.log(a),a.includes("gmail.com")){const x=new W;v(o,x).then(_=>{const G=_.user;return l(G),u(!0),p(c),d(0),q(_.user,t)}).then(_=>{console.log("GitHub account linked to existing user:",_.user)}).catch(console.error)}else console.error("User must sign in with existing method:",a)}else console.error("Other auth error:",s)}),r(!1)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:n.signInWrapper,children:[e.jsx(C,{to:c!=""?c:"/AcadComponent/",className:n.Link,children:e.jsx(A,{func:()=>{N()},content:"X",className:n.goToStartingPage})}),e.jsx("div",{className:n.topArc,children:"SIGN IN"}),e.jsxs("div",{className:n.form,children:[e.jsxs("div",{className:n.userNameCon,children:[e.jsx("h3",{children:"Username :"}),e.jsx("input",{className:"emailInput",ref:h,onInput:s=>{I(s)}}),e.jsx("span",{ref:m})]}),e.jsxs("div",{className:n.passwordCon,children:[e.jsx("h3",{children:"Password :"}),e.jsx("input",{type:w?"text":"password",ref:f,onInput:s=>{P(s)},className:n.Password}),e.jsx("span",{ref:g}),e.jsx("img",{src:w?"./password/visible.png":"./password/unsee.png",className:n.seePassword,onClick:()=>{j(!w)}})]}),e.jsxs("div",{className:n.moreActions,children:[e.jsx("span",{className:n.forgotPass,children:"Forgot Password"}),e.jsx(C,{className:n.createAcc,to:"/AcadComponent/SignUp",children:"Doesn't Have An Account?"})]}),e.jsx(A,{className:n.signInButton,func:()=>{b()},content:"SIGN IN"})]}),e.jsxs("div",{className:n.otherPlatformsWrapper,children:[e.jsxs("div",{className:n.iconsWrapper,children:[e.jsx("div",{className:n.wrapper,onClick:()=>{S()},children:e.jsx("img",{src:"./platforms/GG.png "})}),e.jsx("div",{className:n.wrapper,onClick:()=>{T()},children:e.jsx("img",{src:"./platforms/facebook.png"})}),e.jsx("div",{className:n.wrapper,onClick:()=>{F()},children:e.jsx("img",{src:"./platforms/github.png"})})]}),e.jsx("h3",{children:"SIGN IN WITH DIFFERENT PLATFORMS"})]})]})})}export{os as default};
