import{r as a,j as e,B as i,c as ke,d as re,a as ce,u as pe,b as we,g as Ie,e as Ee}from"./index-G7ddQPW9.js";const He="_bottomOptionsWrapper_1hzx8_1",De="_left_1hzx8_36",Ae="_uncheck_1hzx8_36",Je="_right_1hzx8_45",qe="_fullContent_1hzx8_72",E={bottomOptionsWrapper:He,left:De,uncheck:Ae,right:Je,fullContent:qe},Ue=()=>{const{handleSelectedTasks:l,selectedTasks:f,unselectAll:t,tasks:h,searching:m,filteredTasks:c,setFilteredTasks:d,handleMarking:g,selecting:u,setSelecting:s,tasksOnType:n,setTasksOnType:r}=a.useContext(D),p=()=>{let _=n,b=c,W=[],q=[];if(m){b=b.map(j=>({...j,isChecked:!0}));for(let j=0;j<b.length;j++)b[j].isChecked&&q.push({id:b[j].id,index:j});l([...q])}else{_=_.map(j=>({...j,isChecked:!0}));for(let j=0;j<_.length;j++)_[j].isChecked&&W.push({id:_[j].id,index:j});l([...W])}m?d([...b]):r(j=>j.map(G=>({...G,isChecked:!0})))};function T(){let _=h,b=c;for(let W in b)for(let q in f)b[W].id===f[q].id&&b.splice(W,1);for(let W in h)for(let q in f)_[W].id===f[q].id&&_.splice(W,1);g(b,[..._]),l(null)}const k=()=>{if(u==!0)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:E.left,children:[e.jsx(i,{element:e.jsx("span",{className:E.fullContent,children:"Select All"}),icon:e.jsx("i",{className:"fa fa-check"}),className:E.SelectAllButton,func:()=>{p()}}),e.jsx(i,{element:e.jsx("span",{className:E.fullContent,children:"Unselect"}),icon:e.jsx("i",{className:`fas fa fa-check ${E.uncheck}`}),className:E.UnselectAllButton,func:()=>{t()}})]}),e.jsxs("div",{className:E.right,children:[e.jsx(i,{icon:e.jsx("i",{className:"fa fa-trash"}),element:e.jsx("span",{className:E.fullContent,children:"Delete"}),func:()=>{f?T():console.log("No update")}}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-close"}),element:e.jsx("span",{className:E.fullContent,children:"Cancel"}),func:()=>{s(!1),t()}})]})]})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:E.bottomOptionsWrapper,children:u?e.jsx(k,{}):e.jsx(i,{element:e.jsx("span",{className:E.fullContent,children:"Select"}),icon:e.jsx("i",{className:"fa fa-hand-o-up"}),className:E.SelectButton,func:()=>s(!0)})})})},Le="_editTaskPrompt_p46cq_1",Me="_hideEditTaskPrompt_p46cq_10",Re="_nav_p46cq_29",ze="_content_p46cq_64",Ge="_submitButton_p46cq_87",ee={editTaskPrompt:Le,hideEditTaskPrompt:Me,nav:Re,content:ze,submitButton:Ge},Ve=()=>{const{openedTask:l,setOpenedTask:f,tasks:t,filteredTasks:h,setEditing:m,editing:c,handleMarking:d}=a.useContext(D),g=a.useRef(null);function u(){let s=[...t],n=h;for(let r in s)s[r].id===l.id&&(s[r].task=g.current.innerText);for(let r in n)n[r].id===l.id&&(n[r].task=g.current.innerText);d(n,[...s])}if((l==null?void 0:l.id)!=null)return e.jsxs("div",{className:c?ee.editTaskPrompt:ee.hideEditTaskPrompt,children:[e.jsxs("div",{className:ee.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Edit Task"})]}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{f({index:null,isOpened:!1}),m(!1)}})]}),e.jsx("div",{className:ee.content,children:e.jsx("p",{ref:g,contentEditable:c,children:t.map((s,n)=>{if(s.id===l.id)return s.task})})}),e.jsx(i,{content:"Save Changes",className:ee.submitButton,func:()=>{u(),m(!1)}})]})},Ye="_sortTypeBar_vxque_1",Ze="_hideSortTypeBar_vxque_1",Ke="_sortTypeBarBox_vxque_14",Qe="_notIndicated_vxque_32",Xe="_indicated_vxque_37",se={sortTypeBar:Ye,hideSortTypeBar:Ze,sortTypeBarBox:Ke,notIndicated:Qe,indicated:Xe},es=()=>{const{sortingTypeBar:l,setSortingTypeBar:f,sortingTypes:t,setSortingTypes:h,unselectAll:m,setType:c,type:d,setTasksOnType:g,tasks:u}=a.useContext(D);return a.useEffect(()=>{h(n=>n.map(r=>d==r.type?{...r,ind:!0}:{...r,ind:!1}));let s=[];if(console.log(u),d=="Pending"||d=="Finished"){for(let n in u)u[n].type.toLowerCase()==d.toLowerCase()&&s.push(u[n]);g([...s])}else g([...u])},[d,u]),e.jsx(e.Fragment,{children:e.jsx("div",{className:l?se.sortTypeBar:se.hideSortTypeBar,onClick:()=>{f(!1)},children:e.jsx("ul",{className:se.sortTypeBarBox,children:t==null?void 0:t.map((s,n)=>e.jsx("li",{className:s.ind?se.indicated:se.notIndicated,onClick:()=>{m(),c(s.type),h(r=>r.map(p=>r[n].type==p.type?{...p,ind:!0}:{...p,ind:!1}))},children:s.type},s.type))})})})},ss="_sortTaskPrompt_1n0vh_9",ts="_hideSortTaskPrompt_1n0vh_10",ns="_sortBox_1n0vh_26",as="_Hide_Sort_Box_Button_1n0vh_38",os="_sortOptions_1n0vh_53",ls="_checked_1n0vh_76",rs="_unchecked_1n0vh_76",z={sortTaskPrompt:ss,hideSortTaskPrompt:ts,sortBox:ns,Hide_Sort_Box_Button:as,sortOptions:os,checked:ls,unchecked:rs},cs=()=>{const{setSortTaskPrompt:l,sortTaskPrompt:f,sortingTypes:t,setSortingTypes:h,setSorting:m,sortOptions:c,setSortOptions:d}=a.useContext(D);function g(u){let s=c;s=s.map((n,r)=>s[r]===s[u]?{...n,state:!n.state}:{...n,state:!1});for(let n in s){if(s[n].state==!0){m(!0);break}n==s.length-1&&!s[n].state&&m(!1)}console.log(s),d([...s])}return e.jsx("div",{className:f?z.sortTaskPrompt:z.hideSortTaskPrompt,children:e.jsxs("div",{className:f?z.sortBox:z.Hide_Sort_Box,children:[e.jsx("h2",{children:"Sort Settings"}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-close"}),className:z.Hide_Sort_Box_Button,func:()=>{l(!1)}}),e.jsx("div",{className:z.sortOptions,children:c==null?void 0:c.map((u,s)=>e.jsx(i,{icon:e.jsx("i",{className:`fa fa-check-square ${u.state==!0?z.checked:z.unchecked}`}),content:u.description,func:()=>{g(s)}},u.description))})]})})},is="_tasksContainer_1gk8c_1",ds="_tasks_1gk8c_1",fs="_Finished_1gk8c_37",ps="_unchecked_1gk8c_58",hs="_checked_1gk8c_62",us="_col_1gk8c_66",ms="_br_1gk8c_70",_s="_fs_1gk8c_74",gs="_bgC_1gk8c_78",xs="_fW_1gk8c_82",v={tasksContainer:is,tasks:ds,Finished:fs,unchecked:ps,checked:hs,col:us,br:ms,fs:_s,bgC:gs,fW:xs},H=({task:l,i:f})=>{const{selecting:t,searching:h,tasks:m,setTasks:c,setFilteredTasks:d,handleSelectedTasks:g}=a.useContext(he),{setOpenedTask:u,setEditing:s}=a.useContext(D);function n(r){let p=[],T=m;T=T.map(k=>k.id===r?{...k,isChecked:!k.isChecked}:{...k});for(let k=0;k<T.length;k++)T[k].isChecked&&p.push({id:T[k].id,index:k}),k==T.length-1&&(g(p),console.log(p));c(k=>k.map(_=>_.id===r?{..._,isChecked:!_.isChecked}:{..._})),h&&d(k=>k.map(_=>_.id===r?{..._,isChecked:!_.isChecked}:{..._}))}return e.jsxs("label",{htmlFor:"task"+l.id,style:l.style!="default"?{...l.style}:null,className:l.type=="pending"?`${v.Pending} ${l.cName.map(r=>JSON.parse(r)).join(" ")} ${v.tasks}`:`${v.Finished} ${l.cName.map(r=>JSON.parse(r)).join(" ")} ${v.tasks}`,onDoubleClick:()=>{s(!0),u({id:l.id,isOpened:!0})},children:[e.jsx("i",{style:t==!1?{display:"none"}:{display:"block"},className:`fa fa-check-square ${l.isChecked===!0?v.checked:v.unchecked}`}),e.jsx("input",{style:{display:"none"},type:"checkbox",id:"task"+l.id,onChange:()=>{t&&n(l.id)}}),e.jsx("span",{children:l.task})]},l.id)},ks="_componentLoaderWrapper_10f0f_1",js="_component_10f0f_1",Cs="_component1_10f0f_61",Ts="_component2_10f0f_71",Ns="_component3_10f0f_79",Ps="_component4_10f0f_87",Ss="_component5_10f0f_95",J={componentLoaderWrapper:ks,component:js,component1:Cs,component2:Ts,component3:Ns,component4:Ps,component5:Ss},ys=()=>e.jsxs("div",{className:J.componentLoaderWrapper,children:[e.jsx("li",{className:`${J.component1} ${J.component}`}),e.jsx("li",{className:`${J.component2} ${J.component}`}),e.jsx("li",{className:`${J.component3} ${J.component}`}),e.jsx("li",{className:`${J.component4} ${J.component}`}),e.jsx("li",{className:`${J.component5} ${J.component}`})]}),Bs=()=>{const{sortOptions:l,tasksOnType:f,searching:t,filteredTasks:h}=a.useContext(D),{sorting:m,type:c,selecting:d}=a.useContext(he),[g,u]=a.useState([]);if(a.useEffect(()=>{let s=t?h:f;for(let n in l)n==0&&l[n].state==!0?s=s.sort((r,p)=>p.dateCreated.time-r.dateCreated.time):n==1&&l[n].state==!0?s=s.sort((r,p)=>r.dateCreated.time-p.dateCreated.time):n==2&&l[n].state==!0?s=s.sort((r,p)=>r.task.localeCompare(p.task)):n==3&&l[n].state==!0&&(s=s.sort((r,p)=>p.task.localeCompare(r.task)));u([...s])},[l,f,h]),(f==null?void 0:f.length)==0)return e.jsx(ys,{});if(t&&m)return e.jsx("div",{className:v.tasksContainer,children:g.map((s,n)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(t&&!m)return e.jsx("div",{className:v.tasksContainer,children:h.map((s,n)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(m&&!t)return e.jsx("div",{className:v.tasksContainer,children:g.map((s,n)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id)})});if(!m&&!t)return e.jsx("div",{className:v.tasksContainer,children:f==null?void 0:f.map((s,n)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(H,{task:s,i:n,selecting:d,chechTask:()=>checkTask()},s.id)})})},he=a.createContext(),vs=()=>{const{searching:l,setSearching:f,tasks:t,setTasks:h,filteredTasks:m,setFilteredTasks:c,sorting:d,setSorting:g,type:u,selecting:s,setSelecting:n,handleSelectedTasks:r}=a.useContext(D),[p,T]=a.useState(t.length!=0?[...t]:[]),k={searching:l,setSearching:f,tasks:t,setTasks:h,filteredTasks:m,setFilteredTasks:c,sorting:d,setSorting:g,type:u,selecting:s,setSelecting:n,taskCheckboxes:p,setTaskCheckboxes:T,handleSelectedTasks:r};return a.useEffect(()=>{T([...t])},[t]),e.jsx(he.Provider,{value:k,children:e.jsx(Bs,{})})},bs="_Prompt_Box_g65aa_1",$s="_Close_Button_g65aa_22",Ws="_colorPicker_g65aa_63",Os="_Hide_BG_Color_Prompt_g65aa_79",Fs="_Hide_Color_Prompt_g65aa_80",ws="_Hide_Border_Color_Prompt_g65aa_81",Is="_Hide_Font_Weight_Prompt_g65aa_82",Es="_Hide_Italic_Prompt_g65aa_83",Hs="_BG_Color_Prompt_g65aa_87",Ds="_Color_Prompt_g65aa_88",As="_Border_Color_Prompt_g65aa_89",Js="_Font_Weight_Prompt_g65aa_90",qs="_Italic_Prompt_g65aa_91",Us="_topOptionsWrapper_g65aa_95",Ls="_topOptionsBox_g65aa_105",Ms="_notWorking_g65aa_174",o={Prompt_Box:bs,Close_Button:$s,colorPicker:Ws,Hide_BG_Color_Prompt:Os,Hide_Color_Prompt:Fs,Hide_Border_Color_Prompt:ws,Hide_Font_Weight_Prompt:Is,Hide_Italic_Prompt:Es,BG_Color_Prompt:Hs,Color_Prompt:Ds,Border_Color_Prompt:As,Font_Weight_Prompt:Js,Italic_Prompt:qs,topOptionsWrapper:Us,topOptionsBox:Ls,notWorking:Ms},Rs=()=>{var oe;const{tasks:l,setTasks:f,selectedTasks:t,numberOfChanges:h,setNumberOfChanges:m,handleMarking:c,filteredTasks:d,searching:g,saveToDataBase:u,setType:s,setWriteTaskPrompt:n,setSortTaskPrompt:r}=a.useContext(D),[p,T]=a.useState(!1),[k,_]=a.useState(!1),[b,W]=a.useState(!1),[q,j]=a.useState(!1),[G,A]=a.useState(!1);function $(P,F,Y,Z,K,U){if(t.length>=1){let I=[],w=l,S=d,L=[];P=="finished"?s("Finished"):P=="pending"&&s("Pending");for(let M in t)if(g)for(let C in S)S[C].id==t[M].id?(S[C].lastUpdate={fullDate:new Date,time:Date.now()},P!=!1?console.log(S[t[M].index]):((S[C].style=="default"||S[C].style==null)&&(S[C].style={color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}),F&&(S[C].style.color=F,L.push(S[C])),Y&&(S[C].style.backgroundColor=Y,L.push(S[C])),Z&&(S[C].style.fontWeight=Z,L.push(S[C])),K&&(S[C].style.fontStyle=K,L.push(S[C])),U&&(S[C].style.borderColor=U,L.push(S[C])))):L.push(S[t[M].index]);for(let M in t)w=w.map(C=>{if(t[M].id==C.id){let B={...C};return B.style=B.style==="default"?{color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}:{...B.style},B.isChecked&&(I.push(B),B.lastUpdate={fullDate:new Date,time:Date.now()}),P!==!1&&(B.type=P),F&&(B.style={...B.style,color:F}),Y&&(B.style={...B.style,backgroundColor:Y}),Z&&(B.style={...B.style,fontWeight:Z}),K&&(B.style={...B.style,fontStyle:K}),U&&(B.style={...B.style,borderColor:U}),B.isChecked=!0,B}else return{...C}});g?c([...S],[...w],[...I]):c(S,[...w],[...I])}}function ie(){let P=h+1,F=JSON.parse(localStorage.getItem("Changes"));F=F[P],f([...F]),m(P)}function V(){let P=h-1,F=JSON.parse(localStorage.getItem("Changes"));F=F[P],f([...F]),m(P)}const de=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p?`${o.BG_Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_BG_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx(i,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{T(!1)}}),e.jsx("h1",{children:"Change BG Color"}),e.jsxs("label",{htmlFor:"colorPicker",className:o.colorPicker,children:[e.jsx("input",{type:"color",id:"colorPicker",onBlur:P=>{$(!1,!1,P.target.value,!1,!1)}}),e.jsx("span",{children:"Choose BG Color"})]}),e.jsx(i,{content:"Default",func:()=>{$(!1,!1,"#f09c2e",!1,!1)}})]}),e.jsxs("div",{className:k?`${o.Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Color"}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{_(!1)}}),e.jsxs("label",{htmlFor:"bgColorPicker",className:`${o.bgColorPicker} ${o.colorPicker}`,children:[e.jsx("input",{type:"color",id:"bgColorPicker",onBlur:P=>{$(!1,P.target.value,!1,!1,!1)}}),e.jsx("span",{children:"Choose Font Color"})]}),e.jsx(i,{content:"Default",func:()=>{$(!1,"white",!1,!1,!1)}})]}),e.jsxs("div",{className:b?`${o.Border_Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_Border_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Border Color"}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{W(!1)}}),e.jsxs("label",{htmlFor:"borderColorPicker",className:`${o.borderColorPicker} ${o.colorPicker}`,children:[e.jsx("input",{type:"color",id:"borderColorPicker",onBlur:P=>{$(!1,!1,!1,!1,!1,P.target.value)}}),e.jsx("span",{children:"Choose Border Color"})]}),e.jsx(i,{content:"Default",func:()=>{$(!1,!1,!1,!1,!1,"#d16c06")}})]}),e.jsxs("div",{className:q?`${o.Font_Weight_Prompt} ${o.Prompt_Box}`:`${o.Hide_Font_Weight_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Weight"}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{j(!1)}}),e.jsx(i,{content:"Normal",func:()=>{$(!1,!1,!1,"Normal",!1,!1)}}),e.jsx(i,{content:"Bold",func:()=>{$(!1,!1,!1,"Bold",!1,!1)}}),e.jsx(i,{content:"Bolder",func:()=>{$(!1,!1,!1,"Bolder",!1,!1)}})]}),e.jsxs("div",{className:G?`${o.Italic_Prompt} ${o.Prompt_Box}`:`${o.Hide_Italic_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Italization"}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{A(!1)}}),e.jsx(i,{content:"Normal",func:()=>{$(!1,!1,!1,!1,"Normal",!1)}}),e.jsx(i,{content:"Italic",func:()=>{$(!1,!1,!1,!1,"Italic",!1)}})]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:o.topOptionsWrapper,children:[e.jsx(de,{}),e.jsxs("div",{className:o.topOptionsBox,children:[e.jsx(i,{icon:e.jsx("i",{className:"fa fa-save"}),content:"Save Changes",className:h==null?`${o.notWorking}`:null,func:()=>{h!=null&&u()}}),e.jsx(i,{icon:e.jsx("i",{className:"material-icons",children:"undo"}),content:"Undo",className:h==null||h==0?`${o.notWorking}`:null,func:()=>{h>0&&V()}}),e.jsx(i,{icon:e.jsx("i",{className:"material-icons",children:"redo"}),content:"Redo",className:h<((oe=JSON.parse(localStorage.getItem("Changes")))==null?void 0:oe.length)-1&&h!=null?null:`${o.notWorking}`,func:()=>{var P;h<((P=JSON.parse(localStorage.getItem("Changes")))==null?void 0:P.length)-1&&h!=null&&ie()}}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-plus"}),content:e.jsx("span",{children:" Create New Task"}),func:()=>{n(!0)}}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Finished"}),className:t.length!=0?o.working:o.notWorking,func:()=>{$("finished","white","#51af0f",!1,!1,"rgb(8, 97, 20)")}}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Pending"}),className:t.length!=0?o.working:o.notWorking,func:()=>{$("pending","white","#f09c2e",!1,!1,"rgb(209, 108, 6)")}}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-sort"}),content:e.jsx("span",{children:" Sort"}),func:()=>{r(!0)}}),e.jsx(i,{icon:e.jsx("i",{className:"material-icons",children:"format_color_fill"}),content:e.jsx("span",{children:" BG Color "}),className:t.length!=0?o.working:o.notWorking,func:()=>{T(!0),_(!1),W(!1),j(!1),A(!1)}}),e.jsx(i,{icon:e.jsx("i",{className:"material-icons",children:"format_color_text"}),content:e.jsx("span",{children:" Font Color"}),className:t.length!=0?o.working:o.notWorking,func:()=>{_(!0),T(!1),W(!1),j(!1,A(!1))}}),e.jsx(i,{icon:e.jsx("i",{className:"material-icons",children:"border_color"}),content:e.jsx("span",{children:" Border Color"}),className:t.length!=0?o.working:o.notWorking,func:()=>{W(!0),T(!1),_(!1),j(!1),A(!1)}}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-bold"}),content:" Bold",className:t.length!=0?o.working:o.notWorking,func:()=>{W(!1),T(!1),_(!1),j(!0),A(!1)}}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-italic"}),content:" Italic",className:t.length!=0?o.working:o.notWorking,func:()=>{W(!1),T(!1),_(!1),j(!1),A(!0)}})]})]})})},zs="_writeTaskPrompt_1sqzc_1",Gs="_hideWriteTaskPrompt_1sqzc_1",Vs="_nav_1sqzc_23",Ys="_content_1sqzc_58",Zs="_submitButton_1sqzc_81",te={writeTaskPrompt:zs,hideWriteTaskPrompt:Gs,nav:Vs,content:Ys,submitButton:Zs},Ks=({setWriteTaskPrompt:l})=>{const{writeTaskPrompt:f,writeTask:t,setShowNavbar:h}=a.useContext(D),m=a.useRef(null),c=a.useRef(null),[d,g]=a.useState(!1);function u(){g(Math.random()*1)}function s(){t(c.current.innerText)}function n(){c.current.innerHTML="<br>",r()}function r(){c.current.innerText==`
`||c.current.innerHTML=="<br>"?m.current.style.display="block":m.current.style.display="none"}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:f?te.writeTaskPrompt:te.hideWriteTaskPrompt,children:[e.jsxs("div",{className:te.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Task Prompt"})]}),e.jsx(i,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{l(!1),n()}})]}),e.jsxs("div",{className:te.content,children:[e.jsx("span",{ref:m,children:"Type Any Task..."}),e.jsx("p",{ref:c,contentEditable:"true",onInput:()=>{u(),r()}})]}),e.jsx(i,{content:"Submit",className:te.submitButton,func:()=>{s(),n(),l(!1)}})]})})},Qs="_Changes_Wrapper_hvebf_1",Xs="_Changes_Box_hvebf_15",et="_closeButton_hvebf_29",st="_Top_hvebf_45",tt="_Options_hvebf_71",ne={Changes_Wrapper:Qs,Changes_Box:Xs,closeButton:et,Top:st,Options:tt},nt=()=>{const{saveChanges:l,setSaveChanges:f,user:t,setHideSideBar:h,setLoading:m,setChanges:c,setTasksCache:d}=a.useContext(ke),{setNumberOfChanges:g,numberOfChanges:u,backUpNavigation:s}=a.useContext(D),{setTasks:n}=a.useContext(D),r=async()=>{var T;let p=JSON.parse(localStorage.getItem("Changes"));if(p){console.log(u),p=[...p[u]],p=p.map(b=>({...b,isChecked:!1}));const k=(T=t==null?void 0:t.uid)==null?void 0:T.toString(),_=re(ce,`Users/${k}`);m(!0);try{await pe(_,{tasks:p}),g(null),n([...p]),c(null),localStorage.removeItem("Changes"),d([...p]),s()}catch(b){f(!1),console.log("Error writing task:",b)}m(!1),h(!0)}};if(l)return e.jsx("div",{className:ne.Changes_Wrapper,children:e.jsxs("div",{className:ne.Changes_Box,children:[e.jsx(i,{icon:e.jsx("i",{className:"fa fa-close"}),className:ne.closeButton,func:()=>{f(!1)}}),e.jsxs("div",{className:ne.Top,children:[e.jsx("i",{className:"fa fa-warning"}),e.jsx("h3",{children:"Would You Save Your Previous Changes?"})]}),e.jsxs("div",{className:ne.Options,children:[e.jsx(i,{content:"No",func:()=>{f(!1),localStorage.removeItem("Changes"),window.location.reload()}}),e.jsx(i,{content:"Yes",func:()=>{f(!1),r()}})]})]})})},at="_tasksWrapper_179rq_7",ot="_tasksEditor_179rq_17",lt="_searchWrapper_179rq_52",ae={tasksWrapper:at,tasksEditor:ot,searchWrapper:lt},D=a.createContext(),ct=()=>{const l=JSON.parse(localStorage.getItem("Changes")),f=we(),{user:t,setShowMakeUserSignIn:h,setPages:m,setLoading:c,changes:d,setChanges:g,setTasksCache:u,tasksCache:s,prevPage:n,pagination:r}=a.useContext(ke),p=a.useRef(),[T,k]=a.useState(!1),[_,b]=a.useState(!1),[W,q]=a.useState(!1),[j,G]=a.useState(!1),[A,$]=a.useState(!1),[ie,V]=a.useState(!1),[de,oe]=a.useState(!1),[P,F]=a.useState(!1),[Y,Z]=a.useState("Pending"),[K,U]=a.useState(l?l.length-1:null),[I,w]=a.useState([]),[S,L]=a.useState(I.length!=0?[...I]:[]),[M,C]=a.useState([]),[B,je]=a.useState([]),[ue,me]=a.useState([]),[Ce,Te]=a.useState({}),[Ne,Pe]=a.useState([{type:"Pending",ind:!0},{type:"Finished",ind:!1},{type:"All Tasks",ind:!1}]),[X,Se]=a.useState([{description:"Newest to Oldest",state:!1},{description:"Oldest to Newest",state:!1},{description:"From A-Z",state:!1},{description:"From Z-A",state:!1}]),ye=async y=>{var xe;let x=[...I];const N=(xe=t.uid)==null?void 0:xe.toString(),O=re(ce,"Users",N);let R="qwertyuiopasdfghjklzxcvbnm",Q="";for(let le=0;le<10;le++){let Fe=Math.floor(Math.random()*R.length);Q=Q.concat(R[Fe])}let ge={id:Q,task:y,dateCreated:{fullDate:new Date,time:Date.now()},selected:!1,style:"default",cName:[JSON.stringify(v.col),JSON.stringify(v.br),JSON.stringify(v.fs),JSON.stringify(v.bgC),JSON.stringify(v.fW)],isChecked:!1,type:"pending"};x.unshift(ge);try{await pe(O,{tasks:Ee(ge)}),k(!1),w([...x])}catch(le){console.log("Error writing task:",le)}},_e=()=>{let y=I,x=M;A?(x=x.map(N=>({...N,isChecked:!1})),fe(null)):(y=y.map(N=>({...N,isChecked:!1})),fe(null)),w(N=>N.map(O=>({...O,isChecked:!1}))),A&&C([...x])};function fe(y){me(y==null?[]:[...y])}function Be(y,x){const N=JSON.parse(localStorage.getItem("Changes"))!=null?JSON.parse(localStorage.getItem("Changes")):[];N.length==0&&N.push(s),N.length>=1&&N.push(x),localStorage.setItem("Changes",JSON.stringify(N)),g([...N]),U(N.length-1);let O=[],R=[];for(let Q in x)x[Q].isChecked?O.push(x[Q]):R.push(x[Q]);ue.length>=1&&(A&&C([...y]),w([...O,...R]),u([...O,...R]))}function ve(){p.current.value==""?($(!1),C(null)):($(!0),C(I.filter(y=>y.task.toLowerCase().includes(p.current.value.toLowerCase()))),V(!1))}function be(){let y=X;for(let x=0;x<X.length;x++)if(y[x].state==!0){V(!0);break}else x==X.length-1&&X[x].state==!1&&V(!1)}function $e(){switch(f(n),n){case"/AcadComponent/":r(0);break;case"/AcadComponent/Tasks":r(1);break;case"/AcadComponent/Folders":r(2);break;case"/AcadComponent/Contacts":r(3);break}}async function We(){const y=t==null?void 0:t.uid.toString(),x=re(ce,`Users/${y}`);c(!0);let N=JSON.parse(localStorage.getItem("Changes"));N=[...N[K]],N=N.map(O=>({...O,isChecked:!1}));try{await pe(x,{tasks:N}),U(null),w([...N]),_e(),localStorage.removeItem("Changes"),g(null)}catch{alert("Failed to Save Changes. Please Try Again.")}c(!1)}a.useEffect(()=>{d!=null?w(d[d.length-1]):t!=null&&t.uid&&(s==null?void 0:s.length)==0?(h(!1),(async()=>{try{const x=re(ce,"Users",t==null?void 0:t.uid);let O=(await Ie(x)).data().tasks;for(let R in O)O[R].cName=[JSON.stringify(v.col),JSON.stringify(v.br),JSON.stringify(v.fs),JSON.stringify(v.bgC),JSON.stringify(v.fW)];w([...O]),u([...O])}catch(x){console.log(x)}})()):(t==null?void 0:t.uid)==null&&s==null||(s==null?void 0:s.length)>=1?w(s):h(!0)},[t]),a.useEffect(()=>{p.current.value==""?($(!1),C(null)):($(!0),C(I.filter(y=>y.task.toLowerCase().includes(p.current.value.toLowerCase()))),V(!1))},[I]),a.useEffect(()=>{m(y=>y.map(x=>x.name==="Tasks"?{...x,ind:!0}:{...x,ind:!1}))},[]);const Oe={writeTaskPrompt:T,setWriteTaskPrompt:k,editTaskPrompt:_,setEditTaskPrompt:b,sortTaskPrompt:W,setSortTaskPrompt:q,sortingTypeBar:j,setSortingTypeBar:G,type:Y,setType:Z,searching:A,setSearching:$,sorting:ie,setSorting:V,selecting:de,setSelecting:oe,editing:P,setEditing:F,numberOfChanges:K,setNumberOfChanges:U,tasks:I,setTasks:w,filteredTasks:M,setFilteredTasks:C,tasksOnType:S,setTasksOnType:L,selectedTasks:ue,setSelectedTasks:me,changes:d,setChanges:g,sortingTypes:Ne,setSortingTypes:Pe,type:Y,setType:Z,sortOptions:X,setSortOptions:Se,openedTask:Ce,setOpenedTask:Te,initialData:B,setInitialData:je,unselectAll:_e,handleSelectedTasks:fe,handleMarking:Be,saveToDataBase:We,backUpNavigation:()=>{$e()},writeTask:y=>ye(y)};return e.jsx(e.Fragment,{children:e.jsx(D.Provider,{value:Oe,children:e.jsx("div",{className:ae.tasksWrapper,children:e.jsxs("div",{className:ae.tasksEditor,children:[e.jsxs("h2",{className:ae.titleWrapper,children:["Tasks",e.jsx("i",{className:"fa fa-bars",onClick:()=>{G(!j)}}),e.jsx(es,{})]}),e.jsx(Rs,{}),e.jsx("div",{className:ae.searchWrapper,children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"searchBar",children:e.jsx("i",{className:"fa fa-search"})}),e.jsx("input",{id:"search-bar",type:"text",ref:p,placeholder:"Type Task...",onChange:()=>{ve(),be()}}),e.jsx(i,{content:"Search",className:ae.Search_button})]})}),e.jsx(Ue,{}),e.jsx(vs,{}),e.jsx(Ks,{setWriteTaskPrompt:k}),e.jsx(Ve,{}),e.jsx(nt,{}),e.jsx(cs,{})]})})})})};export{ct as default,D as tasksContext};
