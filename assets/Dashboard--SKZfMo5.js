import{r as a,c as le,b as me,j as e,B as b,n as je,f as L,i as T,h as $,l as oe,o as _e,m as ge,u as ie,d as ue,a as de}from"./index-G7ddQPW9.js";const ve="_dashboardWrapper_xgkre_1",be="_navBar_xgkre_14",Se="_dashboardBox_xgkre_31",Ne="_left_xgkre_48",Be="_right_xgkre_60",I={dashboardWrapper:ve,navBar:be,dashboardBox:Se,left:Ne,right:Be},Ce="_dashboardNavbarWrapper_z7rvu_1",We="_editButt_z7rvu_7",Pe="_Hide_Prompt_Button_z7rvu_30",F={dashboardNavbarWrapper:Ce,editButt:We,Hide_Prompt_Button:Pe},Ie=()=>{const{editAccount:t,setEditAccount:o,saveAccountChanges:x,setShowChanges:l}=a.useContext(y),{prevPage:f}=a.useContext(le),j=me();function m(){t?l(!0):(j(f),o(!1))}const d=()=>t?e.jsx(e.Fragment,{children:e.jsx(b,{icon:e.jsx("i",{className:"fa fa-save"}),content:"SaveChanges",className:F.editButt,func:()=>{x(),o(!1)}})}):e.jsx(e.Fragment,{children:e.jsx(b,{icon:e.jsx("i",{className:"fa fa-edit"}),content:"Edit Information",className:F.editButt,func:()=>{o(!0)}})});return e.jsxs("div",{className:F.dashboardNavbarWrapper,children:[e.jsx(d,{}),e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:F.Hide_Prompt_Button,func:()=>{m()}})]})},ye="_profileImgWrapper_rep40_1",ke="_profPic_rep40_9",we="_uploadPictureWrapper_rep40_20",Ee="_showUploadedPictures_rep40_45",Ae="_hideUploadedPictures_rep40_45",Ue="_uploadedPicBox_rep40_64",$e="_bottom_rep40_95",Fe="_clearButt_rep40_104",Oe="_hidePromptButt_rep40_148",P={profileImgWrapper:ye,profPic:ke,uploadPictureWrapper:we,showUploadedPictures:Ee,hideUploadedPictures:Ae,uploadedPicBox:Ue,bottom:$e,clearButt:Fe,hidePromptButt:Oe},Re="_pictureWrapper_19xlq_1",Me="_hidePromptButt_19xlq_13",re={pictureWrapper:Re,hidePromptButt:Me},ze=()=>{const{userData:t,editAccount:o,user:x,setLoading:l}=a.useContext(y),f=a.useRef(),[j,m]=a.useState(null),[d,h]=a.useState(!1),[c,p]=a.useState([]),i=async()=>{var r;l(!0);try{let s=[];const n=await je(L(T,`${(r=$.currentUser)==null?void 0:r.uid}/Uploaded_Profile_Pictures`));for(let u in n.items){const S=await oe(n.items[u]);s.unshift({img:S,id:Math.random()*1,fileName:n.items[u].name})}p([...s])}catch(s){console.log(s)}l(!1)},g=async r=>{l(!0);const s=r;if(s){let n="qwertyuiopasdfghjklzxcvbnm",u="";for(let k=0;k<15;k++){let w=Math.floor(Math.random()*n.length);u=u.concat(n[w])}const S=L(T,$.currentUser.uid+`/Uploaded_Profile_Pictures/${s.name+"_"+u}`);await _e(S,s),oe(S).then(k=>{p(w=>[{img:k,id:Math.random()*1,fileName:s.name+"_"+u},...w])})}else console.log("No file selected.");l(!1)},v=async r=>{var s;l(!0);try{await ie(ue(de,"Users",(s=$.currentUser)==null?void 0:s.uid),{profPic:r}),f.current.style.backgroundImage=`url(${r})`}catch(n){console.log(n)}l(!1)},B=async r=>{var s;l(!0);try{await ge(L(T,`/${(s=$.currentUser)==null?void 0:s.uid}/Uploaded_Profile_Pictures/${r}`)),i()}catch(n){console.log(n)}l(!1)};a.useEffect(()=>{i()},[x]);const W=()=>{if(j)return e.jsx("div",{className:re.pictureWrapper,style:{backgroundImage:`url(${j})`},children:e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:re.hidePromptButt,func:()=>{m(!1)}})})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:P.profileImgWrapper,children:[e.jsx("div",{ref:f,className:P.profPic,style:t!=null&&t.profPic?{backgroundImage:`url(${t.profPic})`}:{backgroundImage:"url(./blue-circle-with-white-user.png)"},onClick:()=>{m(t.profPic)}}),e.jsxs("div",{className:P.uploadPictureWrapper,children:[o?e.jsx(b,{content:"Change Profile",func:()=>{h(!d)}}):e.jsx("h2",{children:"Profile Picture"}),e.jsx("div",{className:d?P.showUploadedPictures:P.hideUploadedPictures,children:e.jsxs("div",{className:P.uploadedPicBox,children:[e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:P.hidePromptButt,func:()=>{h(!1)}}),e.jsx("h2",{children:"Upload Task"}),e.jsxs("div",{className:P.bottom,children:[e.jsx("label",{htmlFor:"imgInput",children:e.jsx("i",{className:"fa fa-plus"})}),e.jsx("input",{type:"file",accept:"image/*",id:"imgInput",onChange:r=>{g(r.target.files[0])},style:{display:"none"}}),c==null?void 0:c.map(r=>e.jsxs("div",{children:[e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:P.clearButt,func:()=>B(r==null?void 0:r.fileName)}),e.jsx("div",{style:{backgroundImage:`url(${r.img})`},onClick:()=>{v(r==null?void 0:r.img)}})]},r==null?void 0:r.id))]})]})})]})]}),e.jsx(W,{})]})},He="_contactsWrapper_18k80_1",qe="_contactsBox_18k80_14",ce={contactsWrapper:He,contactsBox:qe},Le=()=>{const{contacts:t,setContacts:o,editAccount:x}=a.useContext(y),[l,f]=a.useState(null),[j,m]=a.useState(null),[d,h]=a.useState(t);function c(p,i){i.key!="Enter"?(f(p),m(i.target.value),h(g=>g.map((v,B)=>B==p?{...v,content:i.target.value}:{...v}))):(f(null),o([...d]))}return a.useEffect(()=>{h(t),console.log(t)},[t]),e.jsxs("div",{className:ce.contactsWrapper,children:[e.jsx("h3",{children:"Contacts:"}),e.jsx("div",{className:ce.contactsBox,children:t==null?void 0:t.map((p,i)=>e.jsxs("li",{children:[e.jsx("i",{className:"material-icons",children:p.icon}),e.jsx("input",{rows:1,type:"text",value:i==l?j:p.content,style:x?{borderBottom:".2rem solid #EAAE2C"}:{borderBottom:"none"},contentEditable:!!x,onFocus:g=>{m(g.target.value),f(i),o([...d])},onChange:g=>{x&&c(i,g)},onBlur:g=>{m(g.target.value),f(i),o([...d])}},p.content)]},p.content))})]})},Te="_skillsWrapper_8ovn6_1",De="_addSkillsWrapper_8ovn6_10",Ge="_skillsBox_8ovn6_28",Ke="_hideInput_8ovn6_68",Ye="_showInput_8ovn6_72",E={skillsWrapper:Te,addSkillsWrapper:De,skillsBox:Ge,hideInput:Ke,showInput:Ye},Ve=()=>{const{skills:t,addSkill:o,editAccount:x,setSkills:l,skillRef:f}=a.useContext(y),[j,m]=a.useState(!1);function d(){var c;((c=t==null?void 0:t.current)==null?void 0:c.value)==""||o(),m(!1),f.current.value=""}function h(c){let p=t;for(let i in p)c==i&&p.splice(i,1);l([...p])}return e.jsxs("form",{className:E.skillsWrapper,onSubmit:c=>{c.preventDefault()},children:[e.jsxs("div",{className:E.addSkillsWrapper,children:[e.jsx("h3",{children:"Skills:"}),e.jsx("label",{htmlFor:"blankSkill",style:x?{display:"flex"}:{display:"none"},onClick:()=>m(!0),children:e.jsx("i",{className:"fa fa-plus"})})]}),e.jsxs("div",{className:E.skillsBox,children:[t==null?void 0:t.map((c,p)=>e.jsxs("li",{children:[e.jsx("span",{children:e.jsx("input",{type:"text",value:c,readOnly:!0})}),x?e.jsx(b,{icon:e.jsx("i",{className:"fa fa-close"}),className:E.hidePromptButton,func:()=>{h(p)}}):null]},c)),e.jsxs("div",{className:j?E.showInput:E.hideInput,children:[e.jsx("input",{type:"text",id:"blankSkill",ref:f}),e.jsx(b,{content:"Submit",func:()=>{d()}})]})]})]})},Je="_formsWrapper_ok147_1",Qe="_accountInfoWrapper_ok147_8",Xe="_inputWrapper_ok147_15",N={formsWrapper:Je,accountInfoWrapper:Qe,inputWrapper:Xe},Ze=()=>{const{editAccount:t,uName:o,setUName:x,school:l,setSchool:f,pBirth:j,setPBirth:m,age:d,setAge:h,bDay:c,setBDay:p,gender:i,setGender:g,hobbies:v,setHobbies:B,grSec:W,setGrSec:r}=a.useContext(y);return e.jsxs("div",{className:N.formsWrapper,children:[e.jsxs("div",{className:N.accountInfoWrapper,children:[e.jsxs("div",{className:N.inputWrapper,children:[e.jsx("h4",{children:"Username:"}),e.jsx("input",{onChange:s=>{t&&x(s.target.value)},type:"text",placeholder:"Ex. Peter M. Dela Cruz",value:o||""})]}),e.jsxs("div",{className:N.inputWrapper,children:[e.jsx("h4",{children:"School:"}),e.jsx("input",{onChange:s=>{t&&f(s.target.value)},type:"text",placeholder:"Ex. Lolomboy National High School",value:l||""})]}),e.jsxs("div",{className:N.inputWrapper,children:[e.jsx("h4",{children:"Gr/Section:"}),e.jsx("input",{onChange:s=>{t&&r(s.target.value)},type:"text",placeholder:"Ex. 10-Rizal",value:W||""})]})]}),e.jsxs("div",{className:N.accountInfoWrapper,children:[e.jsxs("div",{className:N.inputWrapper,children:[e.jsx("h4",{children:"Place of Birth:"}),e.jsx("input",{onChange:s=>{t&&m(s.target.value)},type:"text",placeholder:"Ex. Marilao, Bulacan",value:j||""})]}),e.jsxs("div",{className:N.inputWrapper,children:[e.jsx("h4",{children:"Age:"}),e.jsx("input",{onChange:s=>{t&&h(s.target.value)},type:"text",placeholder:"Ex. 26",value:d||""})]}),e.jsxs("div",{className:N.inputWrapper,children:[e.jsx("h4",{children:"Birthday:"}),e.jsx("input",{onChange:s=>{t&&p(s.target.value)},type:"text",placeholder:"Ex. December 31, 2007",value:c||""})]})]}),e.jsxs("div",{className:N.accountInfoWrapper,children:[e.jsxs("div",{className:N.inputWrapper,children:[e.jsx("h4",{children:"Gender:"}),e.jsx("input",{onChange:s=>{t&&g(s.target.value)},type:"text",placeholder:"Ex. Male",value:i||""})]}),e.jsxs("div",{className:N.inputWrapper,children:[e.jsx("h4",{children:"Hobbies:"}),e.jsx("input",{onChange:s=>{t&&B(s.target.value)},type:"text",placeholder:"Ex. Eating, Coding",value:v||""})]})]})]})},et="_Selections_Wrapper_1xl4a_1",tt="_top_1xl4a_7",st="_Subjects_Wrapper_1xl4a_41",at="_makeSubjectButt_1xl4a_48",nt="_IndicatedButt_1xl4a_62",ot="_notIndicatedButt_1xl4a_67",rt="_hideMakeSubjectButt_1xl4a_72",ct="_bottom_1xl4a_86",C={Selections_Wrapper:et,top:tt,Subjects_Wrapper:st,makeSubjectButt:at,IndicatedButt:nt,notIndicatedButt:ot,hideMakeSubjectButt:rt,bottom:ct},lt=()=>{const{userData:t,editAccount:o,setFavSubjects:x,purpose:l,setPurpose:f,usingAs:j,setUsingAs:m}=a.useContext(y),d=a.useRef(),[h,c]=a.useState(null),[p,i]=a.useState(!1),[g,v]=a.useState(0);function B(s){const n=s==null?void 0:s.target;(n==null?void 0:n.value)!=""&&(s==null?void 0:s.key)=="Enter"&&g==0?(v(u=>u+1),i(!1),c(u=>{var S;return[{content:(S=d.current)==null?void 0:S.value,testClass:!0},...u]})):(n==null?void 0:n.value)==""&&(s==null?void 0:s.key)=="Enter"&&(n.value="",i(!1))}function W(s){c(n=>n.map((u,S)=>S==s?{...u,testClass:u.testClass!=!0}:{...u}))}function r(){let s=h,n=[];for(let u in h)s[u].testClass==!0&&n.push(s[u]);c([...n])}return a.useEffect(()=>{h&&x([...h])},[h]),a.useEffect(()=>{t!=null&&t.favSubjects&&c([...t.favSubjects])},[t]),e.jsxs("div",{className:C.Selections_Wrapper,children:[e.jsxs("div",{className:C.top,children:[e.jsxs("h3",{children:[e.jsx("span",{children:"Favourite Subjects"}),e.jsxs("label",{htmlFor:p?"makesubject":"",style:o?{display:"flex"}:{display:"none"},children:[e.jsx("i",{className:"fa fa-plus",onClick:()=>{i(!0),v(0),d.current.value=""}}),e.jsx("i",{className:"fa fa-trash",onClick:()=>{r()}})]})]}),e.jsxs("div",{className:C.Subjects_Wrapper,children:[e.jsx(b,{element:e.jsx("input",{type:"text",id:"makesubject",ref:d,onKeyDown:s=>{B(s)},onBlur:s=>{d.current.value!=""&&(console.log(d.current.value),c(n=>n.filter(u=>u.content.toLowerCase()!==d.current.value.toLowerCase())),c(n=>{var u;return[{content:(u=d.current)==null?void 0:u.value,testClass:!0},...n]}),v(n=>n+1)),i(!1)}}),className:p?C.makeSubjectButt:C.hideMakeSubjectButt}),h==null?void 0:h.map((s,n)=>e.jsx(b,{func:()=>{o&&W(n)},className:s.testClass==!0?C.IndicatedButt:C.notIndicatedButt,content:h[n].content},s+n.toString()))]})]}),e.jsxs("div",{className:C.bottom,children:[e.jsxs("div",{className:C.Purpose_Wrapper,children:[e.jsx("h3",{children:e.jsx("span",{children:"Using As:"})}),o?e.jsx("textarea",{type:"text",contentEditable:!!o,onChange:s=>{m(s.target.value)},rows:"1",value:j}):e.jsx("p",{children:j})]}),e.jsxs("div",{className:C.Using_As_Wrapper,children:[e.jsx("h3",{children:e.jsx("span",{children:"Purpose"})}),o?e.jsx("textarea",{type:"text",contentEditable:!!o,onChange:s=>{f(s.target.value)},value:l}):e.jsx("p",{children:l})]})]})]})},it="_bioWrapper_q9y6o_1",ut={bioWrapper:it},dt=()=>{const{editAccount:t,desc:o,setDesc:x}=a.useContext(y);return e.jsxs("div",{className:ut.bioWrapper,children:[e.jsx("h3",{children:e.jsx("span",{children:"Bio"})}),t?e.jsx("textarea",{rows:4,contentEditable:!!t,onChange:l=>{x(l.target.value)},value:o}):e.jsx("p",{children:o})]})},pt="_Changes_Wrapper_weq0z_1",ht="_Changes_Box_weq0z_15",xt="_Top_weq0z_29",ft="_Options_weq0z_55",O={Changes_Wrapper:pt,Changes_Box:ht,Top:xt,Options:ft},mt=({showChanges:t,setShowChanges:o,saveAccountChanges:x,setEditAccount:l})=>{if(t)return e.jsx("div",{className:O.Changes_Wrapper,children:e.jsxs("div",{className:O.Changes_Box,children:[e.jsxs("div",{className:O.Top,children:[e.jsx("i",{className:"fa fa-warning"}),e.jsx("h3",{children:"Would You Save Your Previous Changes?"})]}),e.jsxs("div",{className:O.Options,children:[e.jsx(b,{content:"No",func:()=>{window.location.reload()}}),e.jsx(b,{content:"Yes",func:()=>{o(!1),x(),l(!1)}})]})]})})},y=a.createContext(),_t=()=>{const{userData:t,user:o,setLoading:x,getDataFromFireStore:l}=a.useContext(le),f=a.useRef(),[j,m]=a.useState(),[d,h]=a.useState(),[c,p]=a.useState(),[i,g]=a.useState(),[v,B]=a.useState(),[W,r]=a.useState(),[s,n]=a.useState(),[u,S]=a.useState(),[k,w]=a.useState(),[D,G]=a.useState(),[K,Y]=a.useState(),[R,M]=a.useState(!1),[V,z]=a.useState(!1),[J,H]=a.useState([]),[Q,pe]=a.useState([{content:"0915-056-2345",icon:"phone"},{content:"example@email.com",icon:"email"}]),[X,he]=a.useState([]);function xe(){var _;((_=f.current)==null?void 0:_.value)!=""&&H(U=>{var A;return[...U,(A=f.current)==null?void 0:A.value]})}const q=async()=>{x(!0);try{await ie(ue(de,"Users",o==null?void 0:o.uid),{perInfo:{school:d,name:j,grSec:u,age:i,bDay:v,gender:W,hobbies:s,placeOfBirth:c,purpose:k},usingAs:D,favSubjects:X,description:K,contacts:Q,skills:J}),l(o)}catch(_){console.log(_)}x(!1)},fe={userData:t,user:o,setLoading:x,skillRef:f,uName:j,setUName:m,school:d,setSchool:h,pBirth:c,setPBirth:p,age:i,setAge:g,bDay:v,setBDay:B,gender:W,setGender:r,hobbies:s,setHobbies:n,grSec:u,setGrSec:S,purpose:k,setPurpose:w,usingAs:D,setUsingAs:G,desc:K,setDesc:Y,editAccount:R,setEditAccount:M,showChanges:V,setShowChanges:z,skills:J,setSkills:H,contacts:Q,setContacts:pe,favSubjects:X,setFavSubjects:he,addSkill:xe,saveAccountChanges:q};return a.useEffect(()=>{var _,U,A,Z,ee,te,se,ae,ne;t&&(m((_=t.perInfo)==null?void 0:_.name),h((U=t.perInfo)==null?void 0:U.school),p((A=t.perInfo)==null?void 0:A.placeOfBirth),g((Z=t.perInfo)==null?void 0:Z.age),B((ee=t.perInfo)==null?void 0:ee.bDay),r((te=t.perInfo)==null?void 0:te.gender),n((se=t.perInfo)==null?void 0:se.hobbies),S((ae=t.perInfo)==null?void 0:ae.grSec),G(t==null?void 0:t.usingAs),w((ne=t==null?void 0:t.perInfo)==null?void 0:ne.purpose),Y(t==null?void 0:t.description),(t==null?void 0:t.contects)!=null,H((t==null?void 0:t.skills)??(t==null?void 0:t.skills)))},[t]),e.jsx(e.Fragment,{children:e.jsxs(y.Provider,{value:fe,children:[e.jsxs("div",{className:I.dashboardWrapper,children:[e.jsxs("nav",{className:I.navBar,children:[e.jsx("h1",{children:"PERSONAL INFORMATIONS"}),e.jsx(Ie,{editAccount:R,setEditAccount:_=>M(_),saveAccountChanges:()=>q(),setShowPersonalInformation:_=>setShowPersonalInformation(_),setShowChanges:_=>z(_)})]}),e.jsxs("div",{className:I.dashboardBox,children:[e.jsxs("div",{className:I.left,children:[e.jsx(ze,{}),e.jsx(Ve,{}),e.jsx(Le,{})]}),e.jsxs("div",{className:I.right,children:[e.jsx("div",{className:I.top,children:e.jsx(Ze,{})}),e.jsx("div",{className:I.mid,children:e.jsx(lt,{})}),e.jsx("div",{className:I.bottom,children:e.jsx(dt,{})})]})]})]}),e.jsx(mt,{editAccount:R,setEditAccount:_=>M(_),saveAccountChanges:()=>q(),showChanges:V,setShowChanges:_=>z(_)})]})})};export{y as dashboardContext,_t as default};
