import{r as a,j as e,B as d,c as ge,d as re,a as ie,u as he,b as We,g as $e,e as Fe}from"./index-Bo3VtSyR.js";const we="_bottomOptionsWrapper_1hzx8_1",Ie="_left_1hzx8_36",Ee="_uncheck_1hzx8_36",He="_right_1hzx8_45",De="_fullContent_1hzx8_72",A={bottomOptionsWrapper:we,left:Ie,uncheck:Ee,right:He,fullContent:De},Ae=()=>{const{handleSelectedTasks:l,selectedTasks:u,unselectAll:t,tasks:h,searching:p,setTasks:c,filteredTasks:i,setFilteredTasks:_,handleMarking:m,selecting:s,setSelecting:n,tasksOnType:r,setTasksOnType:f}=a.useContext(q),C=()=>{let W=r,B=i,D=[],$=[];if(p){B=B.map(T=>({...T,isChecked:!0}));for(let T=0;T<B.length;T++)B[T].isChecked&&$.push({id:B[T].id,index:T});l([...$])}else{W=W.map(T=>({...T,isChecked:!0}));for(let T=0;T<W.length;T++)W[T].isChecked&&D.push({id:W[T].id,index:T});l([...D])}p?_([...B]):f(T=>T.map(H=>({...H,isChecked:!0})))};function k(){let W=h,B=i;for(let D in B)for(let $ in u)B[D].id===u[$].id&&B.splice(D,1);for(let D in h)for(let $ in u)W[D].id===u[$].id&&W.splice(D,1);m(B,[...W]),l(null)}const S=()=>{if(s==!0)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:A.left,children:[e.jsx(d,{element:e.jsx("span",{className:A.fullContent,children:"Select All"}),icon:e.jsx("i",{className:"fa fa-check"}),className:A.SelectAllButton,func:()=>{C()}}),e.jsx(d,{element:e.jsx("span",{className:A.fullContent,children:"Unselect"}),icon:e.jsx("i",{className:`fas fa fa-check ${A.uncheck}`}),className:A.UnselectAllButton,func:()=>{t()}})]}),e.jsxs("div",{className:A.right,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-trash"}),element:e.jsx("span",{className:A.fullContent,children:"Delete"}),func:()=>{u?k():console.log("No update")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),element:e.jsx("span",{className:A.fullContent,children:"Cancel"}),func:()=>{n(!1),t()}})]})]})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:A.bottomOptionsWrapper,children:s?e.jsx(S,{}):e.jsx(d,{element:e.jsx("span",{className:A.fullContent,children:"Select"}),icon:e.jsx("i",{className:"fa fa-hand-o-up"}),className:A.SelectButton,func:()=>n(!0)})})})},Je="_editTaskPrompt_p46cq_1",qe="_hideEditTaskPrompt_p46cq_10",Ue="_nav_p46cq_29",Me="_content_p46cq_64",Le="_submitButton_p46cq_87",ee={editTaskPrompt:Je,hideEditTaskPrompt:qe,nav:Ue,content:Me,submitButton:Le},Re=()=>{const{openedTask:l,setOpenedTask:u,tasks:t,filteredTasks:h,setEditing:p,editing:c,handleMarking:i}=a.useContext(q),_=a.useRef(null);function m(){let s=[...t],n=h;for(let r in s)s[r].id===l.id&&(s[r].task=_.current.innerText);for(let r in n)n[r].id===l.id&&(n[r].task=_.current.innerText);i(n,[...s])}if((l==null?void 0:l.id)!=null)return e.jsxs("div",{className:c?ee.editTaskPrompt:ee.hideEditTaskPrompt,children:[e.jsxs("div",{className:ee.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Edit Task"})]}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{u({index:null,isOpened:!1}),p(!1)}})]}),e.jsx("div",{className:ee.content,children:e.jsx("p",{ref:_,contentEditable:c,children:t.map((s,n)=>{if(s.id===l.id)return s.task})})}),e.jsx(d,{content:"Save Changes",className:ee.submitButton,func:()=>{m(),p(!1)}})]})},ze="_sortTypeBar_vxque_1",Ge="_hideSortTypeBar_vxque_1",Ve="_sortTypeBarBox_vxque_14",Ye="_notIndicated_vxque_32",Ze="_indicated_vxque_37",se={sortTypeBar:ze,hideSortTypeBar:Ge,sortTypeBarBox:Ve,notIndicated:Ye,indicated:Ze},Ke=()=>{const{sortingTypeBar:l,setSortingTypeBar:u,sortingTypes:t,setSortingTypes:h,unselectAll:p,setType:c,type:i,setTasksOnType:_,tasks:m}=a.useContext(q);return a.useEffect(()=>{h(n=>n.map(r=>i==r.type?{...r,ind:!0}:{...r,ind:!1})),console.log(i);let s=[];if(i=="Pending"||i=="Finished"){for(let n in m)m[n].type.toLowerCase()==i.toLowerCase()&&s.push(m[n]);_([...s])}else _([...m])},[i,m]),e.jsx(e.Fragment,{children:e.jsx("div",{className:l?se.sortTypeBar:se.hideSortTypeBar,onClick:()=>{u(!1)},children:e.jsx("ul",{className:se.sortTypeBarBox,children:t==null?void 0:t.map((s,n)=>e.jsx("li",{className:s.ind?se.indicated:se.notIndicated,onClick:()=>{p(),c(s.type),h(r=>r.map(f=>r[n].type==f.type?{...f,ind:!0}:{...f,ind:!1}))},children:s.type},s.type))})})})},Qe="_sortTaskPrompt_1n0vh_9",Xe="_hideSortTaskPrompt_1n0vh_10",es="_sortBox_1n0vh_26",ss="_Hide_Sort_Box_Button_1n0vh_38",ts="_sortOptions_1n0vh_53",ns="_checked_1n0vh_76",as="_unchecked_1n0vh_76",z={sortTaskPrompt:Qe,hideSortTaskPrompt:Xe,sortBox:es,Hide_Sort_Box_Button:ss,sortOptions:ts,checked:ns,unchecked:as},os=()=>{const{setSortTaskPrompt:l,sortTaskPrompt:u,sortingTypes:t,setSortingTypes:h,setSorting:p,sortOptions:c,setSortOptions:i}=a.useContext(q);function _(m){let s=c;s=s.map((n,r)=>s[r]===s[m]?{...n,state:!n.state}:{...n,state:!1});for(let n in s){if(s[n].state==!0){p(!0);break}n==s.length-1&&!s[n].state&&p(!1)}console.log(s),i([...s])}return e.jsx("div",{className:u?z.sortTaskPrompt:z.hideSortTaskPrompt,children:e.jsxs("div",{className:u?z.sortBox:z.Hide_Sort_Box,children:[e.jsx("h2",{children:"Sort Settings"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:z.Hide_Sort_Box_Button,func:()=>{l(!1)}}),e.jsx("div",{className:z.sortOptions,children:c==null?void 0:c.map((m,s)=>e.jsx(d,{icon:e.jsx("i",{className:`fa fa-check-square ${m.state==!0?z.checked:z.unchecked}`}),content:m.description,func:()=>{_(s)}},m.description))})]})})},ls="_tasksContainer_1gk8c_1",rs="_tasks_1gk8c_1",is="_Finished_1gk8c_37",cs="_unchecked_1gk8c_58",ds="_checked_1gk8c_62",fs="_col_1gk8c_66",hs="_br_1gk8c_70",us="_fs_1gk8c_74",ps="_bgC_1gk8c_78",ms="_fW_1gk8c_82",b={tasksContainer:ls,tasks:rs,Finished:is,unchecked:cs,checked:ds,col:fs,br:hs,fs:us,bgC:ps,fW:ms},J=({task:l,i:u})=>{const{selecting:t,searching:h,tasks:p,setTasks:c,setFilteredTasks:i,handleSelectedTasks:_}=a.useContext(ue),{setOpenedTask:m,setEditing:s}=a.useContext(q);function n(r){let f=[],C=p;C=C.map(k=>k.id===r?{...k,isChecked:!k.isChecked}:{...k});for(let k=0;k<C.length;k++)C[k].isChecked&&f.push({id:C[k].id,index:k}),k==C.length-1&&(_(f),console.log(f));c(k=>k.map(S=>S.id===r?{...S,isChecked:!S.isChecked}:{...S})),h&&i(k=>k.map(S=>S.id===r?{...S,isChecked:!S.isChecked}:{...S}))}return e.jsxs("label",{htmlFor:"task"+l.id,style:l.style!="default"?{...l.style}:null,className:l.type=="pending"?`${b.Pending} ${l.cName.map(r=>JSON.parse(r)).join(" ")} ${b.tasks}`:`${b.Finished} ${l.cName.map(r=>JSON.parse(r)).join(" ")} ${b.tasks}`,onDoubleClick:()=>{s(!0),m({id:l.id,isOpened:!0})},children:[e.jsx("i",{style:t==!1?{display:"none"}:{display:"block"},className:`fa fa-check-square ${l.isChecked===!0?b.checked:b.unchecked}`}),e.jsx("input",{style:{display:"none"},type:"checkbox",id:"task"+l.id,onChange:()=>{t&&n(l.id)}}),e.jsx("span",{children:l.task})]},l.id)},_s=()=>{const{sortOptions:l,tasksOnType:u,searching:t,filteredTasks:h}=a.useContext(q),{sorting:p,type:c,selecting:i}=a.useContext(ue),[_,m]=a.useState([]);if(a.useEffect(()=>{let s=t?h:u;for(let n in l)n==0&&l[n].state==!0?s=s.sort((r,f)=>f.dateCreated.time-r.dateCreated.time):n==1&&l[n].state==!0?s=s.sort((r,f)=>r.dateCreated.time-f.dateCreated.time):n==2&&l[n].state==!0?s=s.sort((r,f)=>r.task.localeCompare(f.task)):n==3&&l[n].state==!0&&(s=s.sort((r,f)=>f.task.localeCompare(r.task)));m([...s])},[l,u,h]),t&&p)return e.jsx("div",{className:b.tasksContainer,children:_.map((s,n)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(t&&!p)return e.jsx("div",{className:b.tasksContainer,children:h.map((s,n)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id)})},"Task_Container");if(p&&!t)return e.jsx("div",{className:b.tasksContainer,children:_.map((s,n)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id)})});if(!p&&!t)return e.jsx("div",{className:b.tasksContainer,children:u==null?void 0:u.map((s,n)=>{if(s.type==="pending"&&c==="Pending")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id);if(s.type==="finished"&&c==="Finished")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id);if(c==="All Tasks")return e.jsx(J,{task:s,i:n,selecting:i,chechTask:()=>checkTask()},s.id)})})},ue=a.createContext(),gs=()=>{const{searching:l,setSearching:u,tasks:t,setTasks:h,filteredTasks:p,setFilteredTasks:c,sorting:i,setSorting:_,type:m,selecting:s,setSelecting:n,handleSelectedTasks:r}=a.useContext(q),[f,C]=a.useState(t.length!=0?[...t]:[]),k={searching:l,setSearching:u,tasks:t,setTasks:h,filteredTasks:p,setFilteredTasks:c,sorting:i,setSorting:_,type:m,selecting:s,setSelecting:n,taskCheckboxes:f,setTaskCheckboxes:C,handleSelectedTasks:r};return a.useEffect(()=>{C([...t])},[t]),e.jsx(ue.Provider,{value:k,children:e.jsx(_s,{})})},ks="_Prompt_Box_g65aa_1",xs="_Close_Button_g65aa_22",js="_colorPicker_g65aa_63",Cs="_Hide_BG_Color_Prompt_g65aa_79",Ts="_Hide_Color_Prompt_g65aa_80",Ns="_Hide_Border_Color_Prompt_g65aa_81",Ps="_Hide_Font_Weight_Prompt_g65aa_82",Ss="_Hide_Italic_Prompt_g65aa_83",ys="_BG_Color_Prompt_g65aa_87",Bs="_Color_Prompt_g65aa_88",vs="_Border_Color_Prompt_g65aa_89",bs="_Font_Weight_Prompt_g65aa_90",Os="_Italic_Prompt_g65aa_91",Ws="_topOptionsWrapper_g65aa_95",$s="_topOptionsBox_g65aa_105",Fs="_notWorking_g65aa_174",o={Prompt_Box:ks,Close_Button:xs,colorPicker:js,Hide_BG_Color_Prompt:Cs,Hide_Color_Prompt:Ts,Hide_Border_Color_Prompt:Ns,Hide_Font_Weight_Prompt:Ps,Hide_Italic_Prompt:Ss,BG_Color_Prompt:ys,Color_Prompt:Bs,Border_Color_Prompt:vs,Font_Weight_Prompt:bs,Italic_Prompt:Os,topOptionsWrapper:Ws,topOptionsBox:$s,notWorking:Fs},ws=()=>{var oe;const{tasks:l,setTasks:u,selectedTasks:t,numberOfChanges:h,setNumberOfChanges:p,handleMarking:c,filteredTasks:i,searching:_,saveToDataBase:m,setType:s,setWriteTaskPrompt:n,setSortTaskPrompt:r}=a.useContext(q),[f,C]=a.useState(!1),[k,S]=a.useState(!1),[W,B]=a.useState(!1),[D,$]=a.useState(!1),[T,H]=a.useState(!1);function O(N,w,V,Y,Z,L){if(t.length>=1){let I=[],E=l,P=i,U=[];N=="finished"?s("Finished"):N=="pending"&&s("Pending");for(let M in t)if(_)for(let x in P)P[x].id==t[M].id?(P[x].lastUpdate={fullDate:new Date,time:Date.now()},N!=!1?(P[t[M].index].type=N,U.push(P[t[M].index])):((P[x].style=="default"||P[x].style==null)&&(P[x].style={color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}),w&&(P[x].style.color=w,U.push(P[x])),V&&(P[x].style.backgroundColor=V,U.push(P[x])),Y&&(P[x].style.fontWeight=Y,U.push(P[x])),Z&&(P[x].style.fontStyle=Z,U.push(P[x])),L&&(P[x].style.borderColor=L,U.push(P[x])))):U.push(P[t[M].index]);for(let M in t)E=E.map(x=>{if(t[M].id==x.id){let y={...x};return y.style=y.style==="default"?{color:"default",border:"default",fontStyle:"default",backgroundColor:"default",fontWeight:"default"}:{...y.style},y.isChecked&&(I.push(y),y.lastUpdate={fullDate:new Date,time:Date.now()}),N!==!1&&(y.type=N),w&&(y.style={...y.style,color:w}),V&&(y.style={...y.style,backgroundColor:V}),Y&&(y.style={...y.style,fontWeight:Y}),Z&&(y.style={...y.style,fontStyle:Z}),L&&(y.style={...y.style,borderColor:L}),y.isChecked=!0,y}else return{...x}});_?c([...P],[...E],[...I]):c(P,[...E],[...I])}}function ce(){let N=h+1,w=JSON.parse(localStorage.getItem("Changes"));w=w[N],u([...w]),p(N)}function G(){let N=h-1,w=JSON.parse(localStorage.getItem("Changes"));w=w[N],u([...w]),p(N)}const de=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:f?`${o.BG_Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_BG_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{C(!1)}}),e.jsx("h1",{children:"Change BG Color"}),e.jsxs("label",{htmlFor:"colorPicker",className:o.colorPicker,children:[e.jsx("input",{type:"color",id:"colorPicker",onBlur:N=>{O(!1,!1,N.target.value,!1,!1)}}),e.jsx("span",{children:"Choose BG Color"})]}),e.jsx(d,{content:"Default",func:()=>{O(!1,!1,"#f09c2e",!1,!1)}})]}),e.jsxs("div",{className:k?`${o.Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Color"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{S(!1)}}),e.jsxs("label",{htmlFor:"bgColorPicker",className:`${o.bgColorPicker} ${o.colorPicker}`,children:[e.jsx("input",{type:"color",id:"bgColorPicker",onBlur:N=>{O(!1,N.target.value,!1,!1,!1)}}),e.jsx("span",{children:"Choose Font Color"})]}),e.jsx(d,{content:"Default",func:()=>{O(!1,"white",!1,!1,!1)}})]}),e.jsxs("div",{className:W?`${o.Border_Color_Prompt} ${o.Prompt_Box}`:`${o.Hide_Border_Color_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Border Color"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{B(!1)}}),e.jsxs("label",{htmlFor:"borderColorPicker",className:`${o.borderColorPicker} ${o.colorPicker}`,children:[e.jsx("input",{type:"color",id:"borderColorPicker",onBlur:N=>{O(!1,!1,!1,!1,!1,N.target.value)}}),e.jsx("span",{children:"Choose Border Color"})]}),e.jsx(d,{content:"Default",func:()=>{O(!1,!1,!1,!1,!1,"#d16c06")}})]}),e.jsxs("div",{className:D?`${o.Font_Weight_Prompt} ${o.Prompt_Box}`:`${o.Hide_Font_Weight_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Font Weight"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{$(!1)}}),e.jsx(d,{content:"Normal",func:()=>{O(!1,!1,!1,"Normal",!1,!1)}}),e.jsx(d,{content:"Bold",func:()=>{O(!1,!1,!1,"Bold",!1,!1)}}),e.jsx(d,{content:"Bolder",func:()=>{O(!1,!1,!1,"Bolder",!1,!1)}})]}),e.jsxs("div",{className:T?`${o.Italic_Prompt} ${o.Prompt_Box}`:`${o.Hide_Italic_Prompt} ${o.Prompt_Box}`,children:[e.jsx("h1",{children:"Change Italization"}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:`${o.Close_Button}`,func:()=>{H(!1)}}),e.jsx(d,{content:"Normal",func:()=>{O(!1,!1,!1,!1,"Normal",!1)}}),e.jsx(d,{content:"Italic",func:()=>{O(!1,!1,!1,!1,"Italic",!1)}})]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:o.topOptionsWrapper,children:[e.jsx(de,{}),e.jsxs("div",{className:o.topOptionsBox,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-save"}),content:"Save Changes",className:h==null?`${o.notWorking}`:null,func:()=>{h!=null&&m()}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"undo"}),content:"Undo",className:h==null||h==0?`${o.notWorking}`:null,func:()=>{h>0&&G()}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"redo"}),content:"Redo",className:h<((oe=JSON.parse(localStorage.getItem("Changes")))==null?void 0:oe.length)-1&&h!=null?null:`${o.notWorking}`,func:()=>{var N;h<((N=JSON.parse(localStorage.getItem("Changes")))==null?void 0:N.length)-1&&h!=null&&ce()}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-plus"}),content:e.jsx("span",{children:" Create New Task"}),func:()=>{n(!0)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Finished"}),className:t.length!=0?o.working:o.notWorking,func:()=>{O("finished","white","#51af0f",!1,!1,"rgb(8, 97, 20)")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-edit"}),content:e.jsx("span",{children:" Mark As Pending"}),className:t.length!=0?o.working:o.notWorking,func:()=>{O("pending","white","#f09c2e",!1,!1,"rgb(209, 108, 6)")}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-sort"}),content:e.jsx("span",{children:" Sort"}),func:()=>{r(!0)}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"format_color_fill"}),content:e.jsx("span",{children:" BG Color "}),className:t.length!=0?o.working:o.notWorking,func:()=>{C(!0),S(!1),B(!1),$(!1),H(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"format_color_text"}),content:e.jsx("span",{children:" Font Color"}),className:t.length!=0?o.working:o.notWorking,func:()=>{S(!0),C(!1),B(!1),$(!1,H(!1))}}),e.jsx(d,{icon:e.jsx("i",{className:"material-icons",children:"border_color"}),content:e.jsx("span",{children:" Border Color"}),className:t.length!=0?o.working:o.notWorking,func:()=>{B(!0),C(!1),S(!1),$(!1),H(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-bold"}),content:" Bold",className:t.length!=0?o.working:o.notWorking,func:()=>{B(!1),C(!1),S(!1),$(!0),H(!1)}}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-italic"}),content:" Italic",className:t.length!=0?o.working:o.notWorking,func:()=>{B(!1),C(!1),S(!1),$(!1),H(!0)}})]})]})})},Is="_writeTaskPrompt_1sqzc_1",Es="_hideWriteTaskPrompt_1sqzc_1",Hs="_nav_1sqzc_23",Ds="_content_1sqzc_58",As="_submitButton_1sqzc_81",te={writeTaskPrompt:Is,hideWriteTaskPrompt:Es,nav:Hs,content:Ds,submitButton:As},Js=({setWriteTaskPrompt:l})=>{const{writeTaskPrompt:u,writeTask:t,setShowNavbar:h}=a.useContext(q),p=a.useRef(null),c=a.useRef(null),[i,_]=a.useState(!1);function m(){_(Math.random()*1)}function s(){t(c.current.innerText)}function n(){c.current.innerHTML="<br>",r()}function r(){c.current.innerText==`
`||c.current.innerHTML=="<br>"?p.current.style.display="block":p.current.style.display="none"}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:u?te.writeTaskPrompt:te.hideWriteTaskPrompt,children:[e.jsxs("div",{className:te.nav,children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit"})," ",e.jsx("span",{children:"Task Prompt"})]}),e.jsx(d,{icon:e.jsx("i",{className:"fa fa-times"}),func:()=>{l(!1),n()}})]}),e.jsxs("div",{className:te.content,children:[e.jsx("span",{ref:p,children:"Type Any Task..."}),e.jsx("p",{ref:c,contentEditable:"true",onInput:()=>{m(),r()}})]}),e.jsx(d,{content:"Submit",className:te.submitButton,func:()=>{s(),n(),l(!1)}})]})})},qs="_Changes_Wrapper_hvebf_1",Us="_Changes_Box_hvebf_15",Ms="_closeButton_hvebf_29",Ls="_Top_hvebf_45",Rs="_Options_hvebf_71",ne={Changes_Wrapper:qs,Changes_Box:Us,closeButton:Ms,Top:Ls,Options:Rs},zs=()=>{const{saveChanges:l,setSaveChanges:u,user:t,setHideSideBar:h,setLoading:p,setChanges:c,setTasksCache:i}=a.useContext(ge),{setNumberOfChanges:_,numberOfChanges:m,backUpNavigation:s}=a.useContext(q),{setTasks:n}=a.useContext(q),r=async()=>{var C;let f=JSON.parse(localStorage.getItem("Changes"));if(f){console.log(m),f=[...f[m]],f=f.map(W=>({...W,isChecked:!1}));const k=(C=t==null?void 0:t.uid)==null?void 0:C.toString(),S=re(ie,`Users/${k}`);p(!0);try{await he(S,{tasks:f}),_(null),n([...f]),c(null),localStorage.removeItem("Changes"),i([...f]),s()}catch(W){u(!1),console.log("Error writing task:",W)}p(!1),h(!0)}};if(l)return e.jsx("div",{className:ne.Changes_Wrapper,children:e.jsxs("div",{className:ne.Changes_Box,children:[e.jsx(d,{icon:e.jsx("i",{className:"fa fa-close"}),className:ne.closeButton,func:()=>{u(!1)}}),e.jsxs("div",{className:ne.Top,children:[e.jsx("i",{className:"fa fa-warning"}),e.jsx("h3",{children:"Would You Save Your Previous Changes?"})]}),e.jsxs("div",{className:ne.Options,children:[e.jsx(d,{content:"No",func:()=>{u(!1),localStorage.removeItem("Changes"),window.location.reload()}}),e.jsx(d,{content:"Yes",func:()=>{u(!1),r()}})]})]})})},Gs="_tasksWrapper_179rq_7",Vs="_tasksEditor_179rq_17",Ys="_searchWrapper_179rq_52",ae={tasksWrapper:Gs,tasksEditor:Vs,searchWrapper:Ys},q=a.createContext(),Ks=()=>{const l=JSON.parse(localStorage.getItem("Changes")),u=We(),{user:t,setShowMakeUserSignIn:h,setPages:p,setLoading:c,changes:i,setChanges:_,setTasksCache:m,tasksCache:s,prevPage:n,pagination:r}=a.useContext(ge),f=a.useRef(),[C,k]=a.useState(!1),[S,W]=a.useState(!1),[B,D]=a.useState(!1),[$,T]=a.useState(!1),[H,O]=a.useState(!1),[ce,G]=a.useState(!1),[de,oe]=a.useState(!1),[N,w]=a.useState(!1),[V,Y]=a.useState("Pending"),[Z,L]=a.useState(l?l.length-1:null),[I,E]=a.useState([]),[P,U]=a.useState(I.length!=0?[...I]:[]),[M,x]=a.useState([]),[y,pe]=a.useState([]),[ke,xe]=a.useState({}),[je,Ce]=a.useState([{type:"Pending",ind:!0},{type:"Finished",ind:!1},{type:"All Tasks",ind:!1}]),[X,Te]=a.useState([{description:"Newest to Oldest",state:!1},{description:"Oldest to Newest",state:!1},{description:"From A-Z",state:!1},{description:"From Z-A",state:!1}]),Ne=async j=>{var _e;let g=[...I];const F=(_e=t.uid)==null?void 0:_e.toString(),v=re(ie,"Users",F);let R="qwertyuiopasdfghjklzxcvbnm",K="";for(let le=0;le<10;le++){let Oe=Math.floor(Math.random()*R.length);K=K.concat(R[Oe])}let Q={id:K,task:j,dateCreated:{fullDate:new Date,time:Date.now()},selected:!1,style:"default",cName:[JSON.stringify(b.col),JSON.stringify(b.br),JSON.stringify(b.fs),JSON.stringify(b.bgC),JSON.stringify(b.fW)],isChecked:!1,type:"pending"};g.unshift(Q);try{await he(v,{tasks:Fe(Q)}),k(!1),E([...g])}catch(le){console.log("Error writing task:",le)}},me=()=>{let j=I,g=M;H?(g=g.map(F=>({...F,isChecked:!1})),fe(null)):(j=j.map(F=>({...F,isChecked:!1})),fe(null)),E(F=>F.map(v=>({...v,isChecked:!1}))),H&&x([...g])};function fe(j){pe(j==null?[]:[...j])}function Pe(j,g,F){const v=JSON.parse(localStorage.getItem("Changes"))!=null?JSON.parse(localStorage.getItem("Changes")):[];v.length==0&&v.push(I),v.length>=1&&v.push(g),localStorage.setItem("Changes",JSON.stringify(v)),_([...v]),L(v.length-1);let R=[],K=[];for(let Q in g)g[Q].isChecked?R.push(g[Q]):K.push(g[Q]);y.length>=1&&(H&&x([...j]),E([...R,...K]),m([...R,...K]))}function Se(){f.current.value==""?(O(!1),x(null)):(O(!0),x(I.filter(j=>j.task.toLowerCase().includes(f.current.value.toLowerCase()))),console.log(I.filter(j=>j.task.toLowerCase().includes(f.current.value.toLowerCase()))),G(!1))}function ye(){let j=X;for(let g=0;g<X.length;g++)if(j[g].state==!0){G(!0);break}else g==X.length-1&&X[g].state==!1&&G(!1)}function Be(){switch(u(n),n){case"/AcadComponent/":r(0);break;case"/AcadComponent/Tasks":r(1);break;case"/AcadComponent/Folders":r(2);break;case"/AcadComponent/Contacts":r(3);break}}async function ve(){const j=t==null?void 0:t.uid.toString(),g=re(ie,`Users/${j}`);c(!0);let F=JSON.parse(localStorage.getItem("Changes"));F=[...F[Z]],F=F.map(v=>({...v,isChecked:!1}));try{await he(g,{tasks:F}),L(null),E([...F]),me(),localStorage.removeItem("Changes"),_(null)}catch{alert("Failed to Save Changes. Please Try Again.")}c(!1)}a.useEffect(()=>{i!=null?(console.log(i[i.length-1]),E([...i[i.length-1]])):t!=null&&t.uid&&(s==null?void 0:s.length)==0?(h(!1),(async()=>{try{const g=re(ie,"Users",t==null?void 0:t.uid);let v=(await $e(g)).data().tasks;console.log(v);for(let R in v)v[R].cName=[JSON.stringify(b.col),JSON.stringify(b.br),JSON.stringify(b.fs),JSON.stringify(b.bgC),JSON.stringify(b.fW)];E([...v]),m([...v])}catch(g){console.log(g)}})()):(t==null?void 0:t.uid)==null&&s==null||(s==null?void 0:s.length)>=1?E(s):h(!0)},[t]),a.useEffect(()=>{f.current.value==""?(O(!1),x(null)):(O(!0),x(I.filter(j=>j.task.toLowerCase().includes(f.current.value.toLowerCase()))),G(!1))},[I]),a.useEffect(()=>{p(j=>j.map(g=>g.name==="Tasks"?{...g,ind:!0}:{...g,ind:!1}))},[]);const be={writeTaskPrompt:C,setWriteTaskPrompt:k,editTaskPrompt:S,setEditTaskPrompt:W,sortTaskPrompt:B,setSortTaskPrompt:D,sortingTypeBar:$,setSortingTypeBar:T,type:V,setType:Y,searching:H,setSearching:O,sorting:ce,setSorting:G,selecting:de,setSelecting:oe,editing:N,setEditing:w,numberOfChanges:Z,setNumberOfChanges:L,tasks:I,setTasks:E,filteredTasks:M,setFilteredTasks:x,tasksOnType:P,setTasksOnType:U,selectedTasks:y,setSelectedTasks:pe,changes:i,setChanges:_,sortingTypes:je,setSortingTypes:Ce,type:V,setType:Y,sortOptions:X,setSortOptions:Te,openedTask:ke,setOpenedTask:xe,unselectAll:me,handleSelectedTasks:fe,handleMarking:Pe,saveToDataBase:ve,backUpNavigation:()=>{Be()},writeTask:j=>Ne(j)};return e.jsx(e.Fragment,{children:e.jsx(q.Provider,{value:be,children:e.jsx("div",{className:ae.tasksWrapper,children:e.jsxs("div",{className:ae.tasksEditor,children:[e.jsxs("h2",{className:ae.titleWrapper,children:["Tasks",e.jsx("i",{className:"fa fa-bars",onClick:()=>{T(!$)}}),e.jsx(Ke,{})]}),e.jsx(ws,{}),e.jsx("div",{className:ae.searchWrapper,children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"searchBar",children:e.jsx("i",{className:"fa fa-search"})}),e.jsx("input",{id:"search-bar",type:"text",ref:f,placeholder:"Type Task...",onChange:()=>{Se(),ye()}}),e.jsx(d,{content:"Search",className:ae.Search_button})]})}),e.jsx(Ae,{}),e.jsx(gs,{}),e.jsx(Js,{setWriteTaskPrompt:k}),e.jsx(Re,{}),e.jsx(zs,{}),e.jsx(os,{})]})})})})};export{Ks as default,q as tasksContext};
